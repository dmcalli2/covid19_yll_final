<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
@font-face {
font-family: octicons-link;
src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}
body {
-webkit-text-size-adjust: 100%;
text-size-adjust: 100%;
color: #333;
font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
font-size: 16px;
line-height: 1.6;
word-wrap: break-word;
}
a {
background-color: transparent;
}
a:active,
a:hover {
outline: 0;
}
strong {
font-weight: bold;
}
h1 {
font-size: 2em;
margin: 0.67em 0;
}
img {
border: 0;
}
hr {
box-sizing: content-box;
height: 0;
}
pre {
overflow: auto;
}
code,
kbd,
pre {
font-family: monospace, monospace;
font-size: 1em;
}
input {
color: inherit;
font: inherit;
margin: 0;
}
html input[disabled] {
cursor: default;
}
input {
line-height: normal;
}
input[type="checkbox"] {
box-sizing: border-box;
padding: 0;
}
table {
border-collapse: collapse;
border-spacing: 0;
}
td,
th {
padding: 0;
}
* {
box-sizing: border-box;
}
input {
font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
a {
color: #4078c0;
text-decoration: none;
}
a:hover,
a:active {
text-decoration: underline;
}
hr {
height: 0;
margin: 15px 0;
overflow: hidden;
background: transparent;
border: 0;
border-bottom: 1px solid #ddd;
}
hr:before {
display: table;
content: "";
}
hr:after {
display: table;
clear: both;
content: "";
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 15px;
margin-bottom: 15px;
line-height: 1.1;
}
h1 {
font-size: 30px;
}
h2 {
font-size: 21px;
}
h3 {
font-size: 16px;
}
h4 {
font-size: 14px;
}
h5 {
font-size: 12px;
}
h6 {
font-size: 11px;
}
blockquote {
margin: 0;
}
ul,
ol {
padding: 0;
margin-top: 0;
margin-bottom: 0;
}
ol ol,
ul ol {
list-style-type: lower-roman;
}
ul ul ol,
ul ol ol,
ol ul ol,
ol ol ol {
list-style-type: lower-alpha;
}
dd {
margin-left: 0;
}
code {
font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 12px;
}
pre {
margin-top: 0;
margin-bottom: 0;
font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
.select::-ms-expand {
opacity: 0;
}
.octicon {
font: normal normal normal 16px/1 octicons-link;
display: inline-block;
text-decoration: none;
text-rendering: auto;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.octicon-link:before {
content: '\f05c';
}
.markdown-body:before {
display: table;
content: "";
}
.markdown-body:after {
display: table;
clear: both;
content: "";
}
.markdown-body>*:first-child {
margin-top: 0 !important;
}
.markdown-body>*:last-child {
margin-bottom: 0 !important;
}
a:not([href]) {
color: inherit;
text-decoration: none;
}
.anchor {
display: inline-block;
padding-right: 2px;
margin-left: -18px;
}
.anchor:focus {
outline: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1em;
margin-bottom: 16px;
font-weight: bold;
line-height: 1.4;
}
h1 .octicon-link,
h2 .octicon-link,
h3 .octicon-link,
h4 .octicon-link,
h5 .octicon-link,
h6 .octicon-link {
color: #000;
vertical-align: middle;
visibility: hidden;
}
h1:hover .anchor,
h2:hover .anchor,
h3:hover .anchor,
h4:hover .anchor,
h5:hover .anchor,
h6:hover .anchor {
text-decoration: none;
}
h1:hover .anchor .octicon-link,
h2:hover .anchor .octicon-link,
h3:hover .anchor .octicon-link,
h4:hover .anchor .octicon-link,
h5:hover .anchor .octicon-link,
h6:hover .anchor .octicon-link {
visibility: visible;
}
h1 {
padding-bottom: 0.3em;
font-size: 2.25em;
line-height: 1.2;
border-bottom: 1px solid #eee;
}
h1 .anchor {
line-height: 1;
}
h2 {
padding-bottom: 0.3em;
font-size: 1.75em;
line-height: 1.225;
border-bottom: 1px solid #eee;
}
h2 .anchor {
line-height: 1;
}
h3 {
font-size: 1.5em;
line-height: 1.43;
}
h3 .anchor {
line-height: 1.2;
}
h4 {
font-size: 1.25em;
}
h4 .anchor {
line-height: 1.2;
}
h5 {
font-size: 1em;
}
h5 .anchor {
line-height: 1.1;
}
h6 {
font-size: 1em;
color: #777;
}
h6 .anchor {
line-height: 1.1;
}
p,
blockquote,
ul,
ol,
dl,
table,
pre {
margin-top: 0;
margin-bottom: 16px;
}
hr {
height: 4px;
padding: 0;
margin: 16px 0;
background-color: #e7e7e7;
border: 0 none;
}
ul,
ol {
padding-left: 2em;
}
ul ul,
ul ol,
ol ol,
ol ul {
margin-top: 0;
margin-bottom: 0;
}
li>p {
margin-top: 16px;
}
dl {
padding: 0;
}
dl dt {
padding: 0;
margin-top: 16px;
font-size: 1em;
font-style: italic;
font-weight: bold;
}
dl dd {
padding: 0 16px;
margin-bottom: 16px;
}
blockquote {
padding: 0 15px;
color: #777;
border-left: 4px solid #ddd;
}
blockquote>:first-child {
margin-top: 0;
}
blockquote>:last-child {
margin-bottom: 0;
}
table {
display: block;
width: 100%;
overflow: auto;
word-break: normal;
word-break: keep-all;
}
table th {
font-weight: bold;
}
table th,
table td {
padding: 6px 13px;
border: 1px solid #ddd;
}
table tr {
background-color: #fff;
border-top: 1px solid #ccc;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
img {
max-width: 100%;
box-sizing: content-box;
background-color: #fff;
}
code {
padding: 0;
padding-top: 0.2em;
padding-bottom: 0.2em;
margin: 0;
font-size: 85%;
background-color: rgba(0,0,0,0.04);
border-radius: 3px;
}
code:before,
code:after {
letter-spacing: -0.2em;
content: "\00a0";
}
pre>code {
padding: 0;
margin: 0;
font-size: 100%;
word-break: normal;
white-space: pre;
background: transparent;
border: 0;
}
.highlight {
margin-bottom: 16px;
}
.highlight pre,
pre {
padding: 16px;
overflow: auto;
font-size: 85%;
line-height: 1.45;
background-color: #f7f7f7;
border-radius: 3px;
}
.highlight pre {
margin-bottom: 0;
word-break: normal;
}
pre {
word-wrap: normal;
}
pre code {
display: inline;
max-width: initial;
padding: 0;
margin: 0;
overflow: initial;
line-height: inherit;
word-wrap: normal;
background-color: transparent;
border: 0;
}
pre code:before,
pre code:after {
content: normal;
}
kbd {
display: inline-block;
padding: 3px 5px;
font-size: 11px;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.pl-c {
color: #969896;
}
.pl-c1,
.pl-s .pl-v {
color: #0086b3;
}
.pl-e,
.pl-en {
color: #795da3;
}
.pl-s .pl-s1,
.pl-smi {
color: #333;
}
.pl-ent {
color: #63a35c;
}
.pl-k {
color: #a71d5d;
}
.pl-pds,
.pl-s,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sra,
.pl-sr .pl-sre {
color: #183691;
}
.pl-v {
color: #ed6a43;
}
.pl-id {
color: #b52a1d;
}
.pl-ii {
background-color: #b52a1d;
color: #f8f8f8;
}
.pl-sr .pl-cce {
color: #63a35c;
font-weight: bold;
}
.pl-ml {
color: #693a17;
}
.pl-mh,
.pl-mh .pl-en,
.pl-ms {
color: #1d3e81;
font-weight: bold;
}
.pl-mq {
color: #008080;
}
.pl-mi {
color: #333;
font-style: italic;
}
.pl-mb {
color: #333;
font-weight: bold;
}
.pl-md {
background-color: #ffecec;
color: #bd2c00;
}
.pl-mi1 {
background-color: #eaffea;
color: #55a532;
}
.pl-mdr {
color: #795da3;
font-weight: bold;
}
.pl-mo {
color: #1d3e81;
}
kbd {
display: inline-block;
padding: 3px 5px;
font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.task-list-item {
list-style-type: none;
}
.task-list-item+.task-list-item {
margin-top: 3px;
}
.task-list-item input {
margin: 0 0.35em 0.25em -1.6em;
vertical-align: middle;
}
:checked+.radio-label {
z-index: 1;
position: relative;
border-color: #4078c0;
}
.sourceLine {
display: inline-block;
}
code .kw { color: #000000; }
code .dt { color: #ed6a43; }
code .dv { color: #009999; }
code .bn { color: #009999; }
code .fl { color: #009999; }
code .ch { color: #009999; }
code .st { color: #183691; }
code .co { color: #969896; }
code .ot { color: #0086b3; }
code .al { color: #a61717; }
code .fu { color: #63a35c; }
code .er { color: #a61717; background-color: #e3d2d2; }
code .wa { color: #000000; }
code .cn { color: #008080; }
code .sc { color: #008080; }
code .vs { color: #183691; }
code .ss { color: #183691; }
code .im { color: #000000; }
code .va {color: #008080; }
code .cf { color: #000000; }
code .op { color: #000000; }
code .bu { color: #000000; }
code .ex { color: #000000; }
code .pp { color: #999999; }
code .at { color: #008080; }
code .do { color: #969896; }
code .an { color: #008080; }
code .cv { color: #008080; }
code .in { color: #008080; }
</style>
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>

</head>

<body>

<h1 id="combine-component-models-to-estimate-years-of-life-lost">Combine component models to estimate Years of Life Lost</h1>
<p>David McAllister 17 December, 2020</p>
<h1 id="years-of-life-lost-for-men-assuming-age-and-comorbidity-are-associated-the-correlation-between-comorbidities-was-estimated-assuming-that-the-association-between-comorbidities-was-maximal">Years of Life Lost for men assuming age and comorbidity are associated. The correlation between comorbidities was estimated assuming that the association between comorbidities was maximal.</h1>
<p>This document combines the comorbidity, age and survival model outputs to estimate years of life lost. It can be rendered for men and women, and assuming that age and comorbidity are associated or independent. This particular report is for men and assumes that age and comorbidity are associated.</p>
<p>It also allows for sensitivity analyses on the correlation between comorbidities. This analysis is</p>
<p>one where comorbidities have the maximal possible correlation (although hypertension is treated as a non-disease (ie we indeuce a strong negative correlation, because the in the model hypertension is assocaited wiht a lower mortality) .</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<h1 id="functions">Functions</h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>SurvGomp <span class="ot">&lt;-</span> <span class="cf">function</span>(t, start, ...) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is a modified version of the summary function (survival part)</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># from flexsurv::summary.flexsurvreg, only difference is triple colon as </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># workhorse function undereath (written in c++) is hidden from users</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  ret <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">-</span> flexsurv<span class="sc">:::</span><span class="fu">pgompertz_work</span>(t, ...))<span class="sc">/</span>(<span class="dv">1</span><span class="sc">-</span>flexsurv<span class="sc">:::</span><span class="fu">pgompertz_work</span>(start, ...))</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  ret[t<span class="sc">&lt;</span>start] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  ret</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a> <span class="co"># example of this function</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">SurvGomp</span>(<span class="at">t =</span> <span class="dv">41</span><span class="sc">:</span><span class="dv">130</span>, <span class="at">start =</span> <span class="dv">50</span>, <span class="at">shape =</span> <span class="fl">0.10345</span>, <span class="at">rate =</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">11.0345</span>),</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">lower_tail =</span> <span class="cn">TRUE</span>, <span class="at">give_log =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<h1 id="inputs-to-synthesis">Inputs to synthesis</h1>
<p>Read in simulated patients from comorbidity model, age-sex distribution from the Istituto Superiore di Sanità (ISS report), the WHO global burden of disease life tables and the age distributions from the age models.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>correlation_como <span class="sc">==</span> <span class="st">&quot;converged&quot;</span>)   italy <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/SimulatedProfilesConverged.Rds&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>correlation_como <span class="sc">==</span> <span class="st">&quot;unconverged&quot;</span>) italy <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/SimulatedProfilesUnconverged.Rds&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>correlation_como <span class="sc">==</span> <span class="st">&quot;maximal&quot;</span>) italy <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/highest_cor_como.Rds&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>correlation_como <span class="sc">==</span> <span class="st">&quot;independent&quot;</span>) italy <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/independent_como.Rds&quot;</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(italy) <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(<span class="fu">names</span>(italy))</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>italy <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(italy)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>age_sex <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;Data/age_distribution_italian_deaths.txt&quot;</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;men&quot;</span>) {</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  my_vcov <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/male_vcov.csv&quot;</span>)[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  my_coef <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/male_coef.csv&quot;</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(params<span class="sc">$</span>correlation <span class="sc">==</span> <span class="st">&quot;associated&quot;</span>) {</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(params<span class="sc">$</span>sd_como_age <span class="sc">==</span> <span class="st">&quot;low&quot;</span>) {age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_male_0_5.Rds&quot;</span>)}</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(params<span class="sc">$</span>sd_como_age <span class="sc">==</span> <span class="st">&quot;high&quot;</span>){age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_male_1.Rds&quot;</span>)}</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(params<span class="sc">$</span>correlation <span class="sc">==</span> <span class="st">&quot;independent&quot;</span>) age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_no_comorbid_male.Rds&quot;</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  who <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/who_compare_men.csv&quot;</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;women&quot;</span>) {</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  my_vcov <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/female_vcov.csv&quot;</span>)[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  my_coef <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/female_coef.csv&quot;</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(params<span class="sc">$</span>correlation <span class="sc">==</span> <span class="st">&quot;associated&quot;</span>) {</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(params<span class="sc">$</span>sd_como_age <span class="sc">==</span> <span class="st">&quot;low&quot;</span>) {age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_female_0_5.Rds&quot;</span>)}</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(params<span class="sc">$</span>sd_como_age <span class="sc">==</span> <span class="st">&quot;high&quot;</span>){age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_female_1.Rds&quot;</span>)}</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(params<span class="sc">$</span>correlation <span class="sc">==</span> <span class="st">&quot;independent&quot;</span>) age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_no_comorbid_female.Rds&quot;</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  who <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/who_compare_women.csv&quot;</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>my_vcov <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(my_vcov)</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(my_vcov) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(my_vcov)</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>my_coef_vect <span class="ot">&lt;-</span> my_coef[,<span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">TRUE</span>]</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(my_coef_vect) <span class="ot">&lt;-</span> my_coef[,<span class="dv">1</span>, drop <span class="ot">=</span> <span class="cn">TRUE</span>]</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>my_coef <span class="ot">&lt;-</span> my_coef_vect</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(my_coef_vect)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>who_reference <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;Data/who_mortality_table.txt&quot;</span>)</span></code></pre></div>
<h1 id="who-life-tables-based-yll">WHO life tables based YLL</h1>
<p>The following uses the proportions in each age who died and the WHO GBD 2010 life tables to estimate the YLL.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>age_sex <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>age_point) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(sex, n) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">age_bands</th>
<th align="right">men</th>
<th align="right">women</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">30-39</td>
<td align="right">14</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">40-49</td>
<td align="right">49</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">50-59</td>
<td align="right">190</td>
<td align="right">53</td>
</tr>
<tr class="even">
<td align="left">60-69</td>
<td align="right">607</td>
<td align="right">154</td>
</tr>
<tr class="odd">
<td align="left">70-79</td>
<td align="right">1847</td>
<td align="right">556</td>
</tr>
<tr class="even">
<td align="left">80-89</td>
<td align="right">1808</td>
<td align="right">894</td>
</tr>
<tr class="odd">
<td align="left">90+</td>
<td align="right">274</td>
<td align="right">334</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>age_sex_whole <span class="ot">&lt;-</span> age_sex <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(sex <span class="sc">==</span> params<span class="sc">$</span>sex) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">prp =</span> n<span class="sc">/</span><span class="fu">sum</span>(n), </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">age_mean =</span> prp<span class="sc">*</span>age_point)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>age_sex_restr <span class="ot">&lt;-</span> age_sex <span class="sc">%&gt;%</span> </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(sex <span class="sc">==</span> params<span class="sc">$</span>sex, age_point <span class="sc">&gt;=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">prp =</span> n<span class="sc">/</span><span class="fu">sum</span>(n), </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">age_mean =</span> prp<span class="sc">*</span>age_point)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Mean age</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>mean_age_whole <span class="ot">&lt;-</span> age_sex_whole <span class="sc">%&gt;%</span> </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(age_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">1</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>mean_age_restricted <span class="ot">&lt;-</span> age_sex_restr <span class="sc">%&gt;%</span> </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(age_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">1</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="do">## estimate yll using WHO life expectancy and age distribution alone ----</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>who_reference <span class="ot">&lt;-</span> who_reference <span class="sc">%&gt;%</span> </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(map2italy) <span class="sc">%&gt;%</span> </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">expected_remain =</span> <span class="fu">mean</span>(expected_remain)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>yll_mean_who_whole <span class="ot">&lt;-</span> who_reference <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(age_sex_whole <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">map2italy =</span> age_point, prp)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">res =</span> expected_remain <span class="sc">*</span> prp) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(res) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Joining, by = &quot;map2italy&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>yll_mean_who_restricted <span class="ot">&lt;-</span> who_reference <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(age_sex_restr <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">map2italy =</span> age_point, prp)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">res =</span> expected_remain <span class="sc">*</span> prp) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(res) <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Joining, by = &quot;map2italy&quot;</code></pre>
<p>The mean age for the ISS deaths was 77.4 overall and 77.9 when people who died aged &lt;50 were excluded from the calculation.</p>
<p>The estimated years of life lost obtained by applying the age distributions from the ISS report to these tables was 14.4 per person using the whole cohort and 14 after excluding those aged under 50.</p>
<h1 id="combining-samples-from-survival-models-age-models-and-comorbidity-models">Combining samples from survival models, age models and comorbidity models</h1>
<p>The following combines 10,000 samples from survival models, age models and comorbidity models to estimate the age, sex and comorbidity specific life expectancy and subsequently years of life lost.</p>
<h2 id="age-distributions">Age distributions</h2>
<p>The following shows the modelled age-distribution of the ISS data (based on the published counts of patients in each age band). The grey bars are for the simulated data and the coloured bars are the original data (assuming a uniform distribution within each age-band).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Sum conditions to Calculate comorbidity count</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>italy_count <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(italy)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>age_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">comorbidity_count =</span> italy_count, <span class="at">age =</span> age_smpls)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="do">## spread ages along range of possible values to allow comparison</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>iss <span class="ot">&lt;-</span> age_sex <span class="sc">%&gt;%</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> params<span class="sc">$</span>sex) <span class="sc">%&gt;%</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age_bands, age_point, n) <span class="sc">%&gt;%</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(age_bands) <span class="sc">%&gt;%</span> </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>iss<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">map</span>(iss<span class="sc">$</span>data, <span class="sc">~</span> <span class="fu">rep</span>(.x<span class="sc">$</span>age_point, .x<span class="sc">$</span>n))</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>iss<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">map</span>(iss<span class="sc">$</span>age, <span class="sc">~</span> .x <span class="sc">+</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">4</span>, <span class="at">length.out =</span> <span class="fu">length</span>(.x)))</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>iss <span class="ot">&lt;-</span> iss <span class="sc">%&gt;%</span> </span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(age)) </span></code></pre></div>
<pre><code>## Adding missing grouping variables: `age_bands`</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>plot_ages1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(age_tibble, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">data =</span> iss, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> age_bands), <span class="at">alpha =</span> <span class="fl">0.9</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>plot_ages1</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.

## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Here the above histogram is broken down by the comorbidity count.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>plot_ages2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(age_tibble, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">factor</span>(comorbidity_count, <span class="at">ordered =</span> <span class="cn">TRUE</span>))) </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>plot_ages2</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<h2 id="comorbidity-counts">Comorbidity counts</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>como_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">`</span><span class="at">Comorbidity count</span><span class="st">`</span> <span class="ot">=</span> italy_count) <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Comorbidity count</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">N =</span> <span class="fu">length</span>(<span class="st">`</span><span class="at">Comorbidity count</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Percentage =</span> <span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span> N <span class="sc">/</span><span class="fu">sum</span>(N),<span class="dv">2</span>))</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(como_tbl)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Comorbidity count</th>
<th align="right">N</th>
<th align="right">Percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">2732</td>
<td align="right">27.32</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">4134</td>
<td align="right">41.34</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">342</td>
<td align="right">3.42</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">428</td>
<td align="right">4.28</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">171</td>
<td align="right">1.71</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">467</td>
<td align="right">4.67</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">15</td>
<td align="right">0.15</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">41</td>
<td align="right">0.41</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">193</td>
<td align="right">1.93</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="right">309</td>
<td align="right">3.09</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="right">759</td>
<td align="right">7.59</td>
</tr>
<tr class="even">
<td align="right">11</td>
<td align="right">409</td>
<td align="right">4.09</td>
</tr>
</tbody>
</table>
<p>Here the above histogram is shown as small multiples having stratified by comorbidity count.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>plot_ages3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(age_tibble, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> comorbidity_count) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="st">&quot;Age (years)&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Number of simulated patients (of 20,000)&quot;</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>plot_ages3</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The following is a check that the names of the comorbidities are the same in the samples from the survival models and comorbidity estimates. The comorbidity samples should have no differences (character 0) and the coefficients and variance-covariance matrix from the survival model shoudl be identical apart from the shape and rate parameters.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>name_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;atr_fib&quot;</span>, <span class="st">&quot;cancer&quot;</span>, <span class="st">&quot;copd&quot;</span>, <span class="st">&quot;demen&quot;</span>, <span class="st">&quot;diab&quot;</span>, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;h_fail&quot;</span>, <span class="st">&quot;hypert&quot;</span>, <span class="st">&quot;ihd&quot;</span>, <span class="st">&quot;renal&quot;</span>, <span class="st">&quot;liver&quot;</span>, <span class="st">&quot;stroke&quot;</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>name_cols_age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;atr_fib:age&quot;</span>, </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;cancer:age&quot;</span>, <span class="st">&quot;copd:age&quot;</span>, <span class="st">&quot;demen:age&quot;</span>, <span class="st">&quot;diab:age&quot;</span>, <span class="st">&quot;h_fail:age&quot;</span>, </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;hypert:age&quot;</span>, <span class="st">&quot;ihd:age&quot;</span>, <span class="st">&quot;renal:age&quot;</span>, <span class="st">&quot;liver:age&quot;</span>, <span class="st">&quot;stroke:age&quot;</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">colnames</span>(italy), name_cols)</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">names</span>(my_coef), <span class="fu">c</span>(name_cols, name_cols_age))</span></code></pre></div>
<pre><code>## [1] &quot;shape&quot; &quot;rate&quot;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">colnames</span>(my_vcov), <span class="fu">c</span>(name_cols, name_cols_age))</span></code></pre></div>
<pre><code>## [1] &quot;shape&quot; &quot;rate&quot;</code></pre>
<h2 id="design-matrix">Design matrix</h2>
<p>The following code multiplies the comorbidity samples, which is a prediction matrix by age to get age:comorbidity interactions</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>italy_ages <span class="ot">&lt;-</span> age_smpls <span class="sc">*</span> italy</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(italy_ages)</span></code></pre></div>
<pre><code>##      atr_fib cancer copd demen     diab h_fail   hypert     ihd renal liver stroke
## [1,]  0.0000      0    0     0 104.7950      0 104.7950  0.0000     0     0      0
## [2,] 72.2617      0    0     0  72.2617      0  72.2617 72.2617     0     0      0
## [3,]  0.0000      0    0     0   0.0000      0   0.0000  0.0000     0     0      0
## [4,]  0.0000      0    0     0   0.0000      0   0.0000  0.0000     0     0      0
## [5,]  0.0000      0    0     0   0.0000      0  90.7491  0.0000     0     0      0
## [6,]  0.0000      0    0     0   0.0000      0   0.0000  0.0000     0     0      0</code></pre>
<h2 id="sampling-from-survival-model">Sampling from survival model</h2>
<p>THe following code samples from the survival model to obtain 10,000 samples of the coefficients.</p>
<p>Check data are correctly aligned then obtain 10,000 samples.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">names</span>(my_coef) <span class="sc">==</span> <span class="fu">colnames</span>(my_vcov))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>surv_smpls <span class="ot">&lt;-</span> mvtnorm<span class="sc">::</span><span class="fu">rmvnorm</span>(<span class="dv">10000</span>, my_coef, my_vcov)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> (<span class="fu">colMeans</span>(surv_smpls) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">3</span>))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">apply</span>(surv_smpls, <span class="dv">2</span>, sd) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">3</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">tibble</span>(<span class="st">&quot;_&quot;</span> <span class="ot">=</span> <span class="fu">names</span>(a), <span class="st">&quot;est&quot;</span> <span class="ot">=</span> a, <span class="at">se =</span> b))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">_</th>
<th align="right">est</th>
<th align="right">se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">shape</td>
<td align="right">0.097</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">rate</td>
<td align="right">-11.044</td>
<td align="right">0.048</td>
</tr>
<tr class="odd">
<td align="left">atr_fib</td>
<td align="right">-0.122</td>
<td align="right">0.101</td>
</tr>
<tr class="even">
<td align="left">cancer</td>
<td align="right">1.520</td>
<td align="right">0.077</td>
</tr>
<tr class="odd">
<td align="left">copd</td>
<td align="right">2.134</td>
<td align="right">0.079</td>
</tr>
<tr class="even">
<td align="left">demen</td>
<td align="right">1.718</td>
<td align="right">0.146</td>
</tr>
<tr class="odd">
<td align="left">diab</td>
<td align="right">0.934</td>
<td align="right">0.070</td>
</tr>
<tr class="even">
<td align="left">h_fail</td>
<td align="right">1.280</td>
<td align="right">0.109</td>
</tr>
<tr class="odd">
<td align="left">hypert</td>
<td align="right">-0.177</td>
<td align="right">0.066</td>
</tr>
<tr class="even">
<td align="left">ihd</td>
<td align="right">0.406</td>
<td align="right">0.106</td>
</tr>
<tr class="odd">
<td align="left">renal</td>
<td align="right">0.148</td>
<td align="right">0.085</td>
</tr>
<tr class="even">
<td align="left">liver</td>
<td align="right">4.057</td>
<td align="right">0.169</td>
</tr>
<tr class="odd">
<td align="left">stroke</td>
<td align="right">0.807</td>
<td align="right">0.094</td>
</tr>
<tr class="even">
<td align="left">atr_fib:age</td>
<td align="right">0.005</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">cancer:age</td>
<td align="right">-0.016</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">copd:age</td>
<td align="right">-0.020</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">demen:age</td>
<td align="right">-0.009</td>
<td align="right">0.002</td>
</tr>
<tr class="even">
<td align="left">diab:age</td>
<td align="right">-0.010</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">h_fail:age</td>
<td align="right">-0.011</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">hypert:age</td>
<td align="right">0.003</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">ihd:age</td>
<td align="right">-0.003</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">renal:age</td>
<td align="right">0.001</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">liver:age</td>
<td align="right">-0.047</td>
<td align="right">0.002</td>
</tr>
<tr class="even">
<td align="left">stroke:age</td>
<td align="right">-0.006</td>
<td align="right">0.001</td>
</tr>
</tbody>
</table>
<h2 id="estimating-the-linear-predictor-for-each-of-the-10000-iterations">Estimating the linear predictor for each of the 10,000 iterations</h2>
<p>Note that these multiplications are not matrix multiplications. They are element-wise multiplications of identically positioned elements in each matrix. Each part of the linear predictor is calculated separately, these are then summed to obtain the linear predictor based on the age and comorbidity distributions of the simulated patients.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="do">## shape parameter</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>shpe       <span class="ot">&lt;-</span> surv_smpls[ , <span class="st">&quot;shape&quot;</span>]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Intercept (rate parameter)</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>cept_lp    <span class="ot">&lt;-</span> surv_smpls[ , <span class="st">&quot;rate&quot;</span>]</span></code></pre></div>
<p>The following shows the linear predictor for covariates without interactions by age. These are mostly positive, reflecting the fact that almost all of the comorbidites are associated with increased hazard rates for death.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">## This multiplies the covariate level (binary) with the simulated coefficeints</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>non_age_lp <span class="ot">&lt;-</span> italy[,name_cols] <span class="sc">*</span> (surv_smpls[, name_cols])</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="do">## This adds these together to get the non-age dependent part of the linear predictor</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>non_age_lp <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(non_age_lp)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(non_age_lp, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The following shows the linear predictor for covariates with interactions by age. All are negative, reflecting the fact that there is attenuation in the hazard ratios for the comorbid diseases with increasing age, as is common in chronic disease epidemiology.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Part of lp dependent on age</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure_matrices_match</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">paste0</span>(name_cols, <span class="st">&quot;:age&quot;</span>) <span class="sc">==</span> name_cols_age )</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Loop through the different age groups to get the part of the LP with age interactions</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>ages_lp <span class="ot">&lt;-</span>  <span class="fu">rowSums</span>(italy_ages[, name_cols]  <span class="sc">*</span> surv_smpls[, name_cols_age])</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ages_lp, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The following sums the components of the linear predictor.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="do">## total lp</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>tot_lp <span class="ot">&lt;-</span> cept_lp <span class="sc">+</span> non_age_lp <span class="sc">+</span> ages_lp</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(tot_lp, <span class="at">breaks =</span> <span class="dv">50</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">12</span>, <span class="sc">-</span><span class="dv">5</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAAHgCAMAAABNUi8GAAAAulBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZpAAZrY6AAA6ADo6AGY6OgA6Ojo6OmY6OpA6ZpA6ZrY6kLY6kNtmAABmADpmOgBmOjpmkJBmkLZmkNtmtttmtv+QOgCQZgCQZjqQkGaQkLaQtpCQttuQtv+Q2/+2ZgC2Zjq2ZpC2kGa227a229u22/+2/7a2/9u2///T09PbkDrbkGbbtmbbtpDb27bb29vb2//b////tmb/25D/27b//7b//9v///94QcJKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAPQUlEQVR4nO3d/0Pbxh2HcZGG4Yy13XDTbcX70g1nX+gatemGHOz//9+apJMs2bJkzvfx8YZ7Xj+0BMPZQU/O0tlI2QYQlj33AwCmECikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikESikEWhnvcguH9z/r7Z/6N38jx+t7/DDLMt+Ozb63meGDygJBNqZDvTz+zfWgRZZ6WZk9P3PEGjydgIdWGbmgebZxd3o6PufIdDkHZpBf7rOsouv76teSlUyn77Nsi/+UKey/pBlb+/qksrWvn+fvbnffHpfft2XZXeP8+zq03V28d3mp1n5Vd3dbAeoh3SJDkfffmb30ZV39q/yS97eR/3JPCMC7RwINM+yJpQ2mOYz1ReWX1IVdt19+vKhcDeX2ZWBOte7qXUDHAh078ZDgW7vIA0E2nHB1ZpAq1nwYfNzvaPonnJXs6bbm3oX8uphvWzLurzf/Lf8rl89VF90Uwd6U31v9l3z9bX+AIOn+P6Nh5/iq3u7r0Y9sBPyKhFoZxhoGczbfze3umCabJZuUq0+LkN0gd42X/jLP6+rAcrPl0G5/9bF9ofZtPsFd0dG33l0LtDbzVl2iEURaGcYqPuM2+Osm2j3Aqq02o93Wlv/uR2gmn03zX+7QPsDDALduXEs0PqzeTLP8QTaObAP+vm92+P7e5OQ661+dr9tP+4HWhX99q+/zEcD7Q8wCHTnxslAi27CfuUItHNwHfTzX67bo5YnzKCuxMfxQJlBPRFoZ2yhfv2nbp9wfB+0LsbN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" /><!-- --></p>
<p>The following transforms the linear predictor onto the rate scale.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>tot_rat <span class="ot">&lt;-</span> <span class="fu">exp</span>(tot_lp)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="dv">10000</span><span class="sc">*</span>tot_rat, <span class="at">breaks =</span> <span class="dv">500</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>), <span class="at">xlab =</span> <span class="st">&quot;Rate per 10,000 person-years&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAAHgCAMAAABNUi8GAAAAwFBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZpAAZrY6AAA6ADo6AGY6OgA6Ojo6OmY6OpA6ZpA6ZrY6kLY6kNtmAABmADpmOgBmOjpmOmZmkJBmkLZmkNtmtrZmtttmtv+QOgCQZgCQZjqQkGaQkLaQtpCQttuQtv+Q27aQ2/+2ZgC2Zjq2ZpC2kGa2tpC225C229u22/+2///T09PbkDrbkGbbtmbbtpDb25Db27bb29vb////tmb/25D/27b//7b//9v///+c9Io/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAQrUlEQVR4nO3djXubxgHHcZzGszL3JbOS7q1217Wdybo1GWnXWYqk//+/GscdcAgh69Bx/kn+fp5nq0wsQNY3vJwVyDaAsOypVwDYh0AhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAh7TkEur7LLh/sf6+aL7w//ueH2At8N8uy182XuVvi+l2WXfz5sIeV4uJ+z1oest7xX1tqBPrp7YvYb+IiK93USy+rqxdvXB3ysJrL619e/OuPH4bW8pD1nuC1pfbsAu3Js+hvYpG1m75f32Yu0HLqD5uPWXZ7wEO7YkbzxfZaHrLeE7y21J5doO6Lj9fl3vSr9y4D8zb++nWWfdbual/eV+9uGc33b7MX721oX5TdrebZ1a/X2cU3m4+z8rvaxTQzqGbpEi3KR7NqifavR70O+x/a1S4X+dXP9nF/LZspjf6q9r/n9DzTQItq62TevPpNdFNcSqaw63by5cPC/nGZXRmodd19+9sZdAN9+bNdfPk8s9c3B6SPPqzneF1viftruSvQ7VUl0NPgju3s8V0VqNkKPmx+qQ4U7W5wOXPd3lSHkFcP67wu4vL95n/ls373YL7ppgr0xjw3+8Z9f8WfgbeL//j6wf39qJ5sF/foQzfHy//O6lj7a9nbffdXlV38aegHWr59L93O072J7q3M7UbVPC5DtIG6o8DNbz9dmxmU08tI7P+7ptrZbOrjgvvO4kcFuvn44+anD53Z99fS019VAj0N/UDtFHvEWb2J9VGASat+3Glt/bd6Bmbru3H/3wbqzyBWoL7eWu4KdHtVCfQ07DgG/fTWHqf96N5E21u1d7+tH/uBmqJf/v23+WCg/gwmC7SzkKFAvVUl0NOwcxz003fX9dnGAVtQG89qONDHt6DhJ0m+w7eg3qoS6GkYGqhff9seyw0fg1bverXNak6SdgT6+DGo/Y+3Dnse9h10DLq9qgR6GvqBlm/iH6r9fHVObN7X4bP4erN0+fDpbvgYdOgsftPZuH7TDsnvf9jTX8vuQjabHava/57T8zwD3bxrxgqr30vuGwdtDuz2niT546ADgYb+qrOjv5aLHQP1W6va/57T80wD3fxijkC/eL9xvzZ6735H8xf7hHLSl+97Z/EvfyjKSUOBejPYHWj1GZLmYyGPPOy9ht5a1lMa/VXtf8/peQ6BjrT7bAVpEWhfXn1Wrtw67tzZIikC7XO/zD6BE4x6TU9iZcch0B0+fT1zn3USR6DA0yJQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSCNQSAsLtL689IlfVhqnIyjQor7g9cK78jUwoZBA13ftHQO4OjaSCAl0NW9ukLJgJ48k2IJCWuAxqNuEcgyKRMLO4s290usbSQEJMA4KaQQKaSkG6rMRglYL5yvFQH32n2AECivFMBOBYrQUA/UEitHYgkJaioF6AsVoKQbqCRSjpSiBQDFanBL2j18SKEaLPFBPoIgr8kA9gSKuyMNMBIq4Ig/UEyjiYgsKaZEH6gkUcUUeqCdQxBW5BAJFXAQKaWEl5Fl2VQ3W3w58A4EirrCTpPLYM8+uzLEoJ0lIIniYaXFxv2GYCakED9TbIXoG6pEGW1BIG3cM6v1O6YDZEShG4ywe0hgHhTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChTQChbSwEqrLf5cG7vFBoIgt7CYK9U2OudsxEgm+DY3FbWiQRvCNvCxu5IU02IJCWuAxqNuEcgyKRMJKWM3tWfzA9pNAERvjoJBGoJDGQD2kMVAPaQwzQRoD9ZDGFhTSGKiHNAbqIY1xUEiLU0LW2PmnBIqxGKiHNAbqIY1hJkhjoB7S2IJCGgP1kMZAPaQxUA9pBAppYSXk5cn7cpZlF/chsyNQjBZUQtXnq/vOgNMBsyNQjBY2Dlqeu+dX5iHDTEgjdKDejYUyUI80wnbx5dazYAuKhIJKWM1ffKg2oYuhsyQCRVyBJSzsQP1V0OwIFKMxDgppBAppBAppBAppBAppBAppBAppBAppBAppBAppBAppTQmr+fBv2EfMrjORQDGWV0KRZUP/mnjM7LyJBIqxuiUc3SiBIq7tEop9164Ln52dSKAYq1OC+bSn+Vcdg9dlCJtdM5FAMVZbgrlqiC1z6B8cBc3On0igGMs7ix/8x+5jZteZSKAYi3FQSPNKyMsd/OBl68Jn500kUIzVlpBXB6Cr+VHD9QSKuLxjUHs1myPOkDYEitiaEurLJxcECiFtCfbyycsZv0mCEK8Ec13F4QsrBs/Om0igGIthJkgjUEhrS3j0Nodhs/MnEijG8sZBjyqzNzt/IoFiLG8c9NgPK3dm15lIoBirN1AfaXadiQSKsbyB+gj/JIlAEVlbwiKLsAklUMTl/6tOzuIhh3FQSAsr4dGxUgJFXF4J5U7+8iHfN9hU1B9n5nbcSMQ7Sbq4Ly4f9g2H1p/I23CfJKTS+TyoyW7P50G9oVLuNIc0OgP1JtA9n6hnC4rkelvQfM9VG4p6qJRjUCSyfQxa7B2urwdLByMmUMTVPYvnE/UQw0A9pDFQD2lBv4tnoB6pbZew77oNDDMhuV4J+fDHQhmoR3K9Ehioh5JeCfsufcNAPVLbLmH/1e0YqEdivbP48den78yuM5FAMVacErLGzj8lUIzFQD2k9Qfq9/THQD1S2/5nx/s+zcQwE5LzPg9qyxxKb8NAPZ5Au4t/Yz9ox0A9lPS2oHyiHko6n6gv/7/Y+4llBuqR2PYn6o8bpydQRMYn6iFtTAnL2eBQFIEirpBL3xwwlk+giCvk0jf1yTtbUCQTcukbsw01J1EEimRCLn1j5Bf3BIp0gi59YxTZDYEimbBL3xjL2WcEilRGXPpmfTccMYEiLgbqIa1zDBpxdp2JBIqxuNMcpHknSdxMFnq4kRekcZIEaQQKabaEOGdIGwJFbF6gMQaaCBRxESikESikESikESikESik1YE+fmm7gNltTyRQjMVAPaQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKQRKKSFlbC+e+SfhRAo4goqoahvcszdjpFISAncLx7JhZTgXWJs6Gq3BIq42IJCWuAxqNuEcgyKRMJKqC/wMHg3OgJFXIyDQhqBQhoD9ZDGQD2kMcwEaQzUQxpbUEhjoB7SGKiHNMZBIS1OCe0V7nf+KYFiLAbqIY2BekhjmAnSGKiHNLagkMZAPaQxUA9pDNRDGoFCWlgJRbl7rw5DC87ikUTYSdLFfXkYerUhUKQSPsy0vitPkQgUaYwZqM8vHwgUaYwaqM+vCBRphB2DuixX86HPMxEo4go9i7c7+fUdgSIJxkEhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhjUAhTTXQEeK+EmhQDXTEU+K+EmggUEgjUEg7o0A5bD1HZxToiKfEffGYAIFCWth7tL6zu8YXH0JmpxsoRwXygn7gRXZjHyzqBwfNTjfQEU9JJOxdPGMhP4n1XZNlcflw+Ox0a0vyFOW/B2mEJXlAUQNW89v64aK7k9+/Lk/3k4GsKQI9YAsKxBV4DOo2oYPHoEBcYccHq7ndPrP9RCKcLkIagUIagUIagUIagUIagUIagUIagUJaikCf9pe+eHJHxROrwidexnkthRcT58lCyzivpfBi4jxZaBnntRReTJwnCy3jvJbCi4nzZKFlnNdSeDFxniy0jPNaCi8mzpOFlnFeS+HFxHmy0DLOaym8mDhPFlrGeS2FFxPnycDUCBTSCBTSCBTSCBTSCBTSCBTSCBTSCBTSCBTSCBTSCBTSCBTSJg90kWUX91MvpLT8/dCdR6Kp7nGS4Mq9RaIf2Saf/jqv9oqyV+NnMHWgi/JHvUjw417NB2+NE8v6rnwdxTE/7MMU5StJ8SMrtx3TB7p8deQLmThQe1n7fPI3dbHn3k2xLGfmAujF1MtZzW/Mz23yH5nZuE0f6OLYH9fEgSZ6UxfZzdE/iUMXlWTvmyLQ4vLb6QMtjn0dUwdabeFTxJMq0DzJcorp/xqUb02CY9D88yOP2ycO1G5vUmx1EgWa5P4miwTnYubga/pAV3OziPyIV0OgYUuZ/hypsr6buh1zp6sEW9DKMe8Nu/ighSS7P9TUf6erNyZVoPZMZJzzOEnapAm0SHf/smPe00MU7sqI0y7FOWas6UyGmZIEWiR5O22aSXYI029Bj38x5zJQn+AdXc7SbD9NNt5tUSde0tSLMNsm4ZOkdL+3mz5Qt1ec/tXkqXa9KY5Bj30xfFgE0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0ggU0p5zoNVtZbavUL0Iu5CQu/tN52Y7zRf9Bwj1vAOtLgu58C9utZoHBeruftO5hl/zRf8BghFo944aYYG6u990roLafNF/gHAE6q5CaC8TuJxl5uZBRbvjX776fua+cFNXb75zN2Wq737TuY5080X/wb75mSVXm/KFmzr/67y5cGEVt7mjS7Ni7qqGW889QwRq/2MSMPd+qbag5kF9udryzb+1RwH1VHvnCscG6l+Jv/mi/2DP/KqIF+6PVvOr8n/mvnbuuMA8d313265Yu7r+c88RgVZX9l69ubfbPhNoda+3NijzRXH50Ey1D5zquzr3Mmm+6D/YM7/6+rv2cKD83mpqfaV6s1Zl5u1T2tX1nnuWnnegnRsJLLLMBmpTcnG4q6zXmZVfdg5TRwS6c371vUbtH7dT23182XRnxZrVTXGf0qfzvAO9Mm+324xmL/7ttqAL/w4Ybv9cBlVP7QcatIsfmF/1t+XW1VdO6gZaPjm/8VbMX93muWfp2Qdq731UdVHv4jsjQm1Q9dQdgQadJA3PL7+4721B7WnR6s0/3nhDVZ3VbZ4b++cjgUCrt9buqbP6GNQr0B4z5uaY0U3tBxoyzLRvfuUj7xjU34Ku7z4vz4b8DWq7ujvW6owQaHUmbLdGZlNlzjqqk+e8PmY0/dZn3WZqP9CQgfqB+bXf15zF+4G6e4jVT/FW13/uOSJQ++ZXd8sxTeb1OKg78VjO/jRzB3hu6o5A65vt2Dk2d97pPxie36K+w00zDtoJ1N2srV6xenW3nnuGnnOgBwm7J+Hyddz5tU/7Ms1tNeUQ6CPCglo8ek+1kYEWye4SKoZAHxEW1LtHd7SjAl3OEt2XWA+BQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQhqBQtr/ATjduk9Qnfq8AAAAAElFTkSuQmCC" /><!-- --></p>
<h2 id="estimate-the-survival-at-each-time-point-3-monthly">Estimate the survival at each time-point (3-monthly)</h2>
<p>The following uses a function from the flexsurv package called by summary.flexsurv to obtain survival probabilities at each follow-up time. Where the time is before the patients age at baseline (in this case the age at death in the ISS data) the survival probability is by definition one.</p>
<p>In this function all notional patients have the same shape parameter, but have patient-specific rate parameters. This function is not vectorised with respect to the rate and shape parameters, but it is nonetheless very fast.</p>
<p>For one simulated patient in the “low” SD age group the rate and age variables are such that the function returns a missing value, this is the only sample that does so. Presumably there is a numerical reason in the internals of the function. Give a warning and drop from the summary function at the end. Return an error if there is more than one missing. Only occured in most recent set of simulated patients which is a fresh simulation.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>times_vect <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">50</span>, <span class="dv">150</span>, <span class="fl">0.25</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>tot_surv <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, <span class="at">nrow =</span> <span class="dv">10000</span>, <span class="at">ncol =</span> <span class="fu">length</span>(times_vect))</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>){</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="fu">SurvGomp</span>(<span class="at">t =</span> times_vect, <span class="at">start =</span> age_smpls[i], <span class="at">shape =</span> shpe[i], <span class="at">rate =</span> tot_rat[i],</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">lower_tail =</span> <span class="cn">TRUE</span>, <span class="at">give_log =</span> <span class="cn">FALSE</span>)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  tot_surv[i,] <span class="ot">&lt;-</span> <span class="fu">t</span>(a)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>tot_surv_na <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">is.na</span>(tot_surv), <span class="at">nrow =</span> <span class="dv">10000</span>, <span class="at">ncol =</span> <span class="fu">length</span>(times_vect))</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>tot_surv_na <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(tot_surv_na)</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>tot_surv_na <span class="ot">&lt;-</span> <span class="fu">any</span>(tot_surv_na <span class="sc">&gt;=</span><span class="dv">1</span>)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>tot_surv_na <span class="ot">&lt;-</span> <span class="fu">sum</span>(tot_surv_na)</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(tot_surv_na <span class="sc">&gt;=</span><span class="dv">1</span>) <span class="fu">warning</span>(<span class="fu">paste0</span>(<span class="st">&quot;The SurvGomp function returned NaN for &quot;</span>, tot_surv_na, <span class="st">&quot; simulated patients&quot;</span>))</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(tot_surv_na <span class="sc">&gt;=</span><span class="dv">5</span>) <span class="fu">stop</span>()</span></code></pre></div>
<h3 id="the-following-plots-show-the-survival-distribution-for-a-random-sample-of-3-notional-patients">The following plots show the survival distribution for a random sample of 3 notional patients.</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>, <span class="dv">1</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(times_vect, tot_surv[i,], <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;survival&quot;</span>, <span class="at">main =</span> <span class="fu">paste0</span>(<span class="st">&quot;Age &quot;</span>, age_smpls[i] <span class="sc">%&gt;%</span>  <span class="fu">round</span>(), <span class="st">&quot; years&quot;</span>))</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
<h2 id="survival-distribution-for-all-patients-stratified-by-age-and-comorbidity-count">Survival distribution for all patients stratified by age and comorbidity count</h2>
<p>The following figures show this for all patients according to age, and comorbidity.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tot_surv)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(surv_all) <span class="ot">&lt;-</span> times_vect</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span> surv_all[ , times_vect <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">50</span>, <span class="dv">120</span>, <span class="fl">2.5</span>)]</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span> surv_all <span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pt =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span>  surv_all <span class="sc">%&gt;%</span> </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">comorbidity_count =</span> italy_count,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">age =</span> age_smpls) <span class="sc">%&gt;%</span> </span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="st">&quot;times&quot;</span>, <span class="st">&quot;survival&quot;</span>, <span class="sc">-</span>pt, <span class="sc">-</span>comorbidity_count, <span class="sc">-</span>age) <span class="sc">%&gt;%</span> </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">times =</span> <span class="fu">as.integer</span>(times),</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">comorbidity_count =</span> <span class="fu">factor</span>(comorbidity_count, <span class="at">ordered =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pt, times)</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span> surv_all <span class="sc">%&gt;%</span> </span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;=</span> times, times <span class="sc">&lt;=</span> <span class="dv">120</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_bands =</span> Hmisc<span class="sc">::</span><span class="fu">cut2</span>(age, <span class="at">cuts =</span> <span class="fu">seq</span>(<span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">10</span>))) </span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>plot_surv <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(surv_all, <span class="fu">aes</span>(<span class="at">x =</span> times, <span class="at">y =</span> survival, <span class="at">colour =</span> comorbidity_count, <span class="at">group =</span> pt)) <span class="sc">+</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> age_bands)</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>plot_surv</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAAHgCAMAAABNUi8GAAABYlBMVEUAAAAAADoAAGYAOpAAZrYZGT8ZGWIZP4EZYp8aGhoem4olhY4rsH8tcI4zMzM4WYw6AAA6ADo6AGY6OmY6OpA6kLY6kNs/GRk/GT8/GWI/P4E/gb1DPoVEAVRIIXNNTU1NTW5NTY5NbqtNjshRxWpiGRliGT9iGWJiP4Fin9lmAABmADpmAGZmOgBmOpBmkJBmtrZmtv9uTU1uTW5uTY5ubqtuq+SBPxmBPz+BP2KBYhmBgZ+Bn4GBvdmF1UqOTU2OTW6OTY6ObquOyP+QOgCQOjqQOmaQZgCQkDqQkGaQtpCQ29uQ2/+fYhmfYmKf2dmrbk2rbm6rbo6rjk2ryKur5P+2ZgC225C22/+2/9u2//+9gT+92dnC3yPIjk3I///Zn2LZvYHZ2Z/Z2b3Z2dnbkDrb///kq27k///r6+vy8vL95yX/tmb/yI7/25D/27b/5Kv//7b//8j//9v//+T///9KzU/XAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAgAElEQVR4nO2di6PsxH3fDzZxwpHUBTclD6+EnU6SmqQP7MROm1puyk3buDgkabhNwcLGcO0IwQ34Wv9/5/eYlzQaaVfSSrs7P+A8VuzumdFnv7/HvB7aaNF2bA9b/wHRooUsAhpt1xYBjbZri4BG27VFQKPt2iKg0XZtZwP6yc3b/bV0jxYBHbT7a+keLQI6aPfX0j1aBHTQ7q+le7QI6KDdX0v3aBHQQbu/lu7RIqCDdn8t3aNFQAft/lq6R4uADtr9tXSPtkdAf/bKb/5EfvvglVde+dq7n/z8D+lXtI+//8pv/OATfuyj3/9J4FVm2+Va6rSKDBr/yivfvmxL92i7BPS38NuPvw1fP/7+tz/54LfUJfnYz37zJ+qxD76x4l9xEUB1S61WmauXbukebb+AfvwXP4BvP//jdz/56PfepSvwi/UY/7qSXaylnVYp+/kf/eDCLd2j7RdQ6dzAx4F3g1uF9tHv/xdwhvoxEtmV7GIt7baKDZTzsi3do+0X0I9+9wegotLPWYD+DhKrH1vV812upZ1WkeGPl23pHm2/gKL9+NsdBcVf9GM3AminVXwNEqbLtnSPtntA3Rj03+H90o/dBqDdVpH9GNp22Zbu0fYLKCjIx//53Y+//w03i5eioh+7jRi02yo0yhEv29I92n4BhVKgVfMkaZG/fO1dXTG8kSzebZVqKTn7i7Z0j7ZjQF37W88dupU6qGvbtXSPtktAraEjZR//Zf//u5mRJMc2bOkebY+A7sTur6V7tAjooN1fS/doEdBBu7+W7tHOBrSWhl+GLXx5vasLvfT0lu7gj531xsugtI5FQAevTm/pDv7YWW+8DErrWAR08Or0lu7gj531xsugtI5FQAevTm/pDv7YWW+8DErrWAR08Or0lu7gj531xsugtI5FQAevTm/pDv7YWW+8DErrWBDQL/7sp/j9Vz984w/+WX8jO6kHLns1AnriG69G1wIWAvTzN76FgP76795uf/lv1Te2k3rgslcjoCe+8Yp8zbYAoB9+8x9JQX/1Vz8FMeVvfPWkHrjs1QjoiW+8KmEzbYqL/+LP/7n91X97j7/JB/6VNPN/5XleFPDDMYevBf2CF1b4g6/ACvfXO+2FhWwKoJ//AZLJ3/ia+QzmZBLM4zHPa/qxKOq6KOTP22rDnKttr6Xh5xxUW3NofF2oq4E+OOXPWfrqLSsomGni4ZBlGUMKiBpgwQYZvTlAi+JAbZVtxo8nIxr6lC72x55+9YYAHY1BM2T0kBwknsfjkbCUdlSMbtb1c662npaGnoOfSaARvvHHEx4P+pEI6IhNAfTXf/c9yuK/583iE/gi+ZT/SjuiKTKPSkc36vo5V/stDT/nIAX0oODMDaL5wCd00T/29Ku3Aij8N1IHTehblhGizOgR7hEjmmt/d+Gun3PV09Lgc6Dxx/ygY5uiMD8FCI2ABm2JkSQGtK4SL6JaUTbo+jlXPS0NPifBxh8PClEtomFCI6BBWwDQRBGaJECow6iKyzyI3h6gCQQ6suFGRK0fBgmNgAZtCUAVoRJQeY8eDaIyazrmhlFMbi/b9XOu9lsafg62Htoum124iOYBQiOgQVvGxSdIaAW3qH7MtIwmQOgxMwpqi+hNAoqRuCRUNt9BFAn1IxoBDdoiCsoSSoAmjwkjmkhCj4joQSmopSS3CCgTmtiEFppQv4hGQIO2DKBEqCBWH8nV4Y1iQiWiR1ZQfZ9uFVCJaCK9h4dQv5uPgAZtIRdf078K0KROmFBMawFRKMEc4WYpKblJQBP+AQG1CD0MExoBDdoigCKRhCnYI90piSdoKKS1mNFLVI+65JTfMqBKQnWyZBHaQzQCGrRFZtSzk08cCeU7lhyMiB7J0RfFYEC2dNfPuepraeg5toJmTKhR0cFANAIatMUAlUiKhJnkW4XfUE0YURxq0YiuNoViS0CTmuvBlMpbKjoUiEZAg7bMmiR28vyFfLyilW4TFUbxi0I0SOg1AyqQUEzls3FCI6BBW2jRnALSklD9Y5YZQklJuTC61gj1poCy58ASBhN66BAaAT3BFgTU8utkFft4Q2imwlGKxlYaod4DoJQfqki0yPXskWNXQiOgQVtq2THck9SVUAaUq6KGUGsiyToj1NsCmtSq3Qk1OVGEFopQR0MjoEFbHNDaBKGV8vUIaNYh9Bgk9AoBrS1Aa4vQ5NAltIiATrazAe0aAArZQWsUFH+HR9qsZRE9AqFHh9Cl/oDNLe16Dk4QM4xFeTxJVTC2/mOvxpbbWURJ6KORUKEktM5qh1CCFO/UgIZeoYKmdQ9Q1FCORQsTiDpOPipo0JYHtPYBKvnEyZKZh9DeXPsFu37O1cGWDjzHACqMhCbKx8tmGxG1P5YR0KAtuDeTCsG0hKbqRuFUEptQM+U+HyjZXyGghlCBQSh8XLNMV0OzgyHUltAIaNDWBDRxAGUnj4QebUK9bv7aAWV/QlVgGkyTrVYj8/agfAQ0aEvubucQagPaIfRgCK1paGXZJXWbA5oYQDP4B30GEnpU2fwl5sVGQIcArVlCu4CikydCM5fQvEvodQLqJTSlUXmYK8Pjnva02Aho2BbdH5RvzKMa+awmEcqLQVbp+jlXQy31PscBtNY+PsUxT57VJXVUEZqvPXE7AjoAKElo0gdU1ZrQ02tCa1qx4xJ6pYDWlnby1yTNEpXL00CviUSX+2NPv3rHgEoJrbtBqIfQgyaUtnJao+vnXA211P+cjo9PzTfyGhB7H2hroEKXgCOgQVsUUGED6gShWkJpYW7WJXTRVfNbAlpbLbYUlFJ5h1AVhkZAg7YKoFpCLUD7hJpBzxrcfLHYqvkdAJpagMJ32Vpan4WEHmwnHwEN2uKAqpUPajSpI6EuoQeHUFtDrx9Q2QGWj89oVtMRR9EOZkBpzbVZEdBODwih50vUsD6+cQDtEUrFF02o6+SvFtC+jxe2j5cSqgmlMDQCGrTlAdWLxxIHUC2hQ4S6YehVAjoUhCZ6QCmjQYrD0WhoBDRoiwJaperWoGJ2AO0RerA2FD12nPwVApraEmqvf6GCPTc3005eLQG5QFNGLi+D0jq2MKDqvjzy6kavhNqEHi1Cc4vQawc06QNqCHUl9AJNGbm8DErr2LKAchDKu8AMAlrTHltqjFoRWliEXjGg3XZrQBNrdetxIqER0OFLekPlX74B9jZ+/1bgnCQFqIpCm86NsiXUEGoVm2gmxZJdP+dqO9xS/3NSBrSsbDLNtCZDKH4sFaER0JANA+oeLAdn0Hz4tnXZ0wMAqLU6PgAoEdqJQpWTLxbs+jlXAy31P8cB1ApCmVO9chCXXx+Pqli/2v4ANw6oc6gHHD/z679/z7rs6YEOoDJJEkOASkLbnpOvLSd/nYASoWVltzlRaXxmFmCzhDKhEdCADQPqHIsEUipdPjj6tnvSnDEhUlozR18bt1SPy+e0ZQSoo6FtS4Qu17yLWor/ym7QgNo+Pkv0dFiWUDNrZOu/fMc2DKh9sBx+/+K7tor6PqISUL3JyKMHUDdNspy8HpTXGnrNClpVSjt7Qagm9KAIHZHQqKCDV2wF/VwfP6PjUF8PaEDZyVcTAO0SStvi3AqgjxanWWZ2WTmaiXf59gdGrsTWIjYtBv3we+rRcUAFowiAPgYAbR1CNaCcKF0joCpLqswH89H29BSFZlYUyl4+AjpsoSxeHyxHjh1k9Nf/EDqOWwh5h0SidgrtzhdxCW0zOkOxK6FWKj+/6+dcbQMt9T/HBZS1s270tCbYr0mlSTxCQQPyw4RGQIcvUR0UT5ojT//LN9745nvqqq8HEFCe01SPAupz8nglz68WUCS0qoQG1K3aZ2ZEySI0JKER0HOf6OmBVAOqJHQMUPmvx8kXo4ReBaBJ3euBzKqGqkHecBR6FYA+f+0d5/tnX3kffvyXfzr5lfpPWQNQveNyEyK0NXs5eAjtLfM8r+vnXA20dOA5HkCTxCkGnyyhVwWoMgmo59EzXqhdDdB6IqD+PKnur1E6s+vnXA20dOg5qQNoQk5EmCA0qTN7QGmChEZAz/2jPD2gAWUJHQWUnHw2QOgSXT/naqClQ8/RgCoJBTJlN1jtz8y8pikSuiWgL548PLxsvj9/7UevPjy8/lx+ecs8+PX/9fCV//va3zw8fPUXyNeXbz689Dfg4vF/fgrPf/by8Eu+g1/o/34LXvr1FQGlsU4CtOY7k3YANYQqQE0YenQIDUnofgGFfy1AQUJtQBMbUE1oQEI3BPTFk5clbm/hd/jv+auSwWcA4rOvvG8eBM7kFfzltXe+fPN1+SSMQYE+0NIXT94afEkF6Kv0qisrqNCAEqFVUwUkFJ9MTt6dNYJXwxK6d0AhUVQbNLmA8glnmtAxCd0QUCvlobzn1beAxbfwivdB9fgzDSjQ+Pzr7w++pAZUv8DagEIhtNaAhvJ4BWjtldA2KKH7BrSsar3xZOq6eOgWApQ/kWMSuiGgFEnK71LdND3qi/sgIChZlL88w8e/rgAF9255+KGXdL6vDqgmFAEd9PH05ExtHeou/wBAAxK6V0ApCDWAJj1AQxJ62ZM8LwPo86//P+Ph9wiovEP26LwlofzkgbnLbTAK3TegOgaVrQVA+Rd9epQloQdLQi981Ox0F//SO44/JkB9D9qun2l78eQ/Gg8/+JKXAtSk8URoU7kTQh0JNYD25y4ToMMSundA1doXBLRxOoEBnSqhGydJ9n8Oi+6DdpL0skqSIP6UPv7h5eGXhJTqxZOXNKD0lMsC+li7EtoFlMPQrCOhbTCR3zGg8l8LUKozJR5C+xLqzZN2VWayAO08+Df6F11meqd9io+9+tbwS7ZQWPpPf2Kih6c2zssDWluA1jjbTrgnJyW0YN7tn4z3FHOWf7TBav31AIo+3im2GQnNJkjoVRTqQ2bl8GfZsjGoD1A1caTr421ADaEWoAEnf22Aunw6gLoSesHDui8E6LNu5f1EWw/Q2gDqDULNk5nQ7gq6wKym3QKKQSgCahbFN71AvPZI6ECedOWAYgUeHTnYSyePfa4AKBdCawIUfbwroTUTaj2ZnXzWKTUNO/mrArQTg+KxUbaEqiN5vE7+ygGdb2sAqgltQj7efnI2JKEDTn6XgGKrwcd7AO1Ug7MBCe3nSRHQBV8LAMWFjYJ+V4DKn6wDEmFlZ9J5Zta2PQmFx69qjSe2GlZ2IqCtKn+2iQxIO4C2mTnxREsob9W0dTN2ZksqaNVRUD2E4pVQ58m2hE5w8vtX0FqfYpaygjphDh8NaTv52iuhUUHPfaKnBwQumrMBhSj0cSAKdZ+cBaLQPqH7BRSCUABUpCqRT0XXxasg1FqDbPKkDqER0HOf6OmBLqBNY92SUUBPkdBdAqokVAPKGtoDVEvoQZeaSEI9s5o2BPRTv50LzJm2sItP7TpTg4PxXgntAepI6Ojk+t0DWsuPqjCApn1AVZ5ktdc6m2bhpoxc9t/hWwXU1JkkoGrdmEdCe4DW9jQ0F9DTzqHbGFAg1AW0L6F6j1RnSauH0AjouU/09IAGlAllBUUJTXoS2u2+UyR094AKG9CGAa0dQB0JtZx8BNSxNQGtDKAeCfUD6kZlYIWH0B0DSj6eAFW7/PkU1JXQo5FQN02KgJ77RE8PVLTkowto+ph0xztrD6CDEto75OvaAPVmSW4ibxFaREBtW7oOmtYmCAUXj/dmIArt2JCEepz8FQBae9J4x8d7JbTuDndGQM99oqcHBgAdktBej2V1L7HFx/sSei2A8qfSq6CdWuiAhEZAz32ipwc8gFbax/cIHQI060voiSd5bgWoypJESoDyHiuNAdRd96IPOwlI6H4B/fJNWIG8uq0OKMLpk9DW4+NtJ390nPwVAqqCUB7r7LmQQQm9CkBhtfuz7vT3FWxJQMuKAAXxAFMKmtTdxcfwWB9QV0KPHQk9q+vnXA20dOA57OMtQGsVhHYBDUmoTehuAf3yT9+fPVt+iq0DKN0qBjTlBY31BEDtAcCAhO4b0MoDaMfHOxLqju+6Pn5TQPO+aUCf//Yv2i//5IwZyCfa0oDaPh4AFQjnRAVVEtrbZ6QrofsGtLYAhTSJh5L6Pr4eqDRZhO5WQWFp+y0AWks4U2tNuLHWmybxeOeIhF4DoGWqtuzHISXrGFMDaD0qobsF9HoVtKxVEEqAqrM7uxLqAzQkodcDqFCA0j5qDS7rTD2VNi2hh0EJ3S2gO4hB9VGI6gxE80A7CdCyaaBY/cil+p6T9wJq5UnHjoSe0fVzrgZaOvAcniSDQagCtIYcHrKk2gdo3QfUTeR3C+iLJ69vnMVbRyHS0R7u2YieHiBA4aa4gKZ+CfUByjuG9jcMdSV0p4Dq8hpIaKmCUJE0wiyND/j4g+3j8yWbMnLZD0AY0O3roOYYGj69yzkbcQjQug9oZ6926w6dIqFOmnQVgOJGK/Bg4kxnenQAdSTUzLor9g/ohWzKQV58BqJ5YOAoRAC0TdXaMfk7AtrSLWmTxFk6l7gnI2qj9XMHdxcHMEiT5rV1faPVgg0GoS1mSfCg7IbErJvTH1V6Sh/QY0sSul0zyPYOqDkKkc9AtM9GHFZQXDhHEioQ0JrUwyehQz7etzrJkdCdK6iw0/jaArSzdhCtt3rOkdCooINXnMNkIQ51H/D1QCmcIBTuDBaru1N5Qj7emVp/tAm1Kk1XBWgpHAX1Atrz8SoKjYAOXnFDTgnoaAw6CGhfPcKA9nZxwAuWhO4S0NIAWkH4WdYWoP35TIrQ1l760ZPQCOjgFXMUIp+BaJ2N2I4BWivfRols/+YM+/hBCbXmNO0c0BQArUreqooBxbEkj4/3RKGWhEZAhy+ZoxD5DMSxOmgA0AEJHQLU+D2/hF4DoJTGa0AHfbwC1N7DwUhoBPTcJ/p6AAHVa8fqsqkaqrSY0U4GM+TjdZ50GJTQvQJac3mtA6gQOgjtS2hrbQjQl9AI6LlPdG8MWsWAYhAKvxtA++oZAFSdQOeNQouTun7O1X5Lw8/pA8rnkwvBLr7jPixAByU0AnruE90bgyYIUEqQUgfQTprUO1HBtYHN7nYOqPbxBCjV3Aygnkicn5z1JLTWEhoBPfeJpolCtVOUtH2Y8vEG0K6PDwehQGjr2wdHE7pvQCsLUJx1B4VQmtXl8fFt7Uro0ZHQCOi5TzRNHAFUH6lwko9vB4v1VwGoJLQSnMZXmCzSbuAeH68A9UtoBPTcJ5omTgGUpuvWfQkZktC2P08SjAndJaBCAdp4AE00oJ3V1wpQV0JrRWgE9NwnWk1UhDqAyugLAWVcYbrZKT6+HUiTcAe4qwC01ICqQqi/Vg9PZgntpkmdXUaWbegdAloxoCVnSSgdahavPQRvdGTIx6s18gMSei2AYpbUIKB9H1+7gA5I6GoNnQ/oJeYrL+LiBwGtvIBOCUIH98EhQncJaKnqTE1Z2VlSSEETG9DMB2iQ0E0B/ezhK9cIqLxFDqB8NQVCH6dLaGtOmL0DQM+V0C0BffrSj65OQSHqQkBxoDNlQGklsgZ0fIcRfOmwhE7t+jlX+y0NP6dUPl56eEiS+oB6g1AL0I6E9jZqWrShEwAt+naNLr52ABWVF9C6t8mwukF+QlseTfJIaHENgELraXJsGNDEAtTdSayeIKExBh02q4klE6oArYcB1cWmUUA9UShfGpfQjeqgGtBmKqC1AvRMCY2ADpvVxB6gKKF9QP2FJj+hDKhPQutRCd0LoFhnMmUmrLX5FTQkoSs19I4AFX5ApXZQksRBqL3UYwKgYQmdcWfWArQqGVDZbAkoB6GQK4pG7d3g8fH80o6EHidKaAR0kgk+WY4AFVVbCjxujgHFlWNt2uLNaXv3p3/uHJs9mqSWk5EVu1w/V5YlLZureCgJVs7Jfyuc5cUS6gGUzPowqubKR1FCN2rPlQNqfQaVgtIkcsyScPcbDSheTVPPdKZBCbUU1CehYR+/VZmJ60ylART6phkBlF/kHAmNI0nDZjeRg1BBlfoOoHXHx3fDsHoI0POj0D0AKlIXUDEEqL14Tkvo0UShEdDzzG5iH1DOklxA7TLomIRqQH2l0KsBFA/fM4D6CVWv0t9kBF46mCZFQIfNbqJO4wHQqoL1jCChbQ/Q/nSmMKC+DV7xajhN2iiLL3nCnQE0PRnQ7q4/bVBCI6DDZjexA6hgH68A1UGoM8YZJpTK10MS2oYldCtASwVoSYDSIkILUNqnKiyhB0dC22ClKQI6bHYTxwC1g1DP3OV6GFDreESb0OsBtNaAUqtHAe1IaFtHQM8z00S93Lbk2SKVAbTqB6HeHRx6hHL5euBgmhai0HPvzAUAhbHOirOkumosQH0Sql/HBvRgAzpEaAR02EwTSyWhDGiFgNYpVAA9Qeg0CVWA+jdqasNp0saAVgZQWJFU4YRQ+ZMrofUgoE7ltw5JaAR02EwTNaCNAlRgliSdvQIUCZWA1rhP6BQJVeMrfgmVV/cKKEgmSCgDKgYBDUioXawPVpoioMNmmmgBilFXH1C3EjpJQjWgXgltw5Wm7QAVFqBNqgFtBG4W6gI6TUIjoGeafWMcQAUDCuvju4A+wpFJfgn1A+pI6FETuk9AawdQ0aSUHZUM6LCEmlfyJfIBQiOgw2Y1cQzQjo+fJKEGUJ+EwtXApLvtAC0NoCkCmgKg0C36ZMQTAQ1KaAR02KwmAqC81IGD0DFAxyVU9553lxG4GpDQjQGF002qWjRVagEKQWg9MtpZe3cLDcxbjoAOm2liowHFLKmqaSYkDH16AK2HJHQAUH0yjS2hBOggoXsAFGJPALTWgPLBc+OATvfxEdBhM030AlobQJ0gdKqE2oD2JRSv0hL5pe/bTECFqjNB41N07RrQYQm1XuskCd0S0OevPjy8dS49020ZQO06kx/QUyXU6lyPhDKgQxK6DaCVArRSgFYpFDOaRu1lO1VCu4AOSuiGgMIpc89fu46T5prSKYRWClAotTSi4+OHJXQYUP9ed8MSuimg+LmED2rKQWhZNjagavWgszzLerFTJHRDQD+DQ7yeri+hk06a++I7cAyNOnCOzGqi8fGcxYcBZQkN+3i7c31RKNighG4FaG0DKioXUD42aUxBhyTUS+jKgB775sSg257VaQ6Wg6M94CgaOnCOzWpiF9CaxqAVoDXtLkKnzA5L6DCg9j449RRCNwK08gEqENBGb45uAO3uIqZb2yW03grQkSQJTkNc3aac8vE5YPrh23zgHJtpYtkHFKfq1i0rqAVoUELDgPr2uhtw8hsCCp/GirN4HklSgPIh0GOFplMkdFNAv3zzAnxOPidJ/sQHzrXdk+Zk/7clLpzjGLSVtweXjylAcVkdLJ2TgMqvIKG9xXOwemxg9Ryvn3O3EsPHiz0dP1dVsG5ONraCSr1oGdBUAdoKPIXPSOij03htWY/QllfPXXb53GgWf4EcftpJcy2dScMHzvFl8xnUCloRoKUKQhHQqheE0vL43hYOro93P/1De90N5EkbKmiJCip7gpJ5G1B9AMqIgnp9vF9CN1TQC/E5UUF/9cPv8aM6DrWaKG9AWXcABbfewv6LqR2EphiEqvHOkI/vdG5wN8YeoTsBlJbHq8H40wAdIHTBhs4E9NkD2JZZvHWw3Bff0emRB9BGSWhFlXob0AoAFZ0siSS07+RtCQ0AWrsS6smTtgK0sgGFxruA1kzoWBDaH07Clnok9K5HkszBcswnHzjHl00TDaA1A0ppvPABij6+9kehAUDrwd0YfU5+M0BNGg+/uIDWK0joXQNqTpqD+iekR3zgHJlpogGUfby8NeDVRWUB2vfx4Vq9D9D+qvHaL6FbAqrTeAK0pNki44B283ivhHYJvW9Aw2Y1sbEBha2vwcejkACgtScIHYhCLQntdW5v0bi9Rr5D6C4ABU9fAZPS8fO0WLNX6qk+fkBCI6DDZjVRSmitsyQFKC6eE5TIChtQI6GemxQA1L5rPSd/yp25JKCpBrR2FmCfJaF9QiOgw2Y1saE0XoKJlfpSaEDlnRLdLGmahPY79wQJ3QbQsgtojTuBpw0p6Ck+3rMPDrY0AjrdTBMrF9CmhASWs1mZ2Ke1fcJsV0KHSqEeQIcktD91eTNAdRrPgEIVOG2sLCnk48MS6iU0AjpspokVBKEGUBmOylSpdgEVouPjxyTU07nTJXQjQEsEFI4sVS4eAhwFKH1OJwLqSQqxpRHQyWY1sVJZUsmAwv5MlMbDWGcvCJ0ioT5AJ292tw2g2sczoCWuPUYfD4Cm5OPx//QD2pdQL6ELNfQOAUUJEfQfBaEEqOvja5bQx/4mTdbiOV/nZt418nVfQjdKkixA0bn7AK0nS+iUKDQCOmxWEytO4xlQCkINoHXaDUKd8c6uhNaJ23vWPRvYqaknoVsDWjKgNeXxBCh2QzgInejkl2no/QBaWlkSuHiac1e6gIoeoG1QQr2d25dQ/5yRrZIkDEIBUPDxFIPTdBG9Mp4JRUC9k7btxtaeoQlXQiOgw2aaWKGP5yyJXLz8yQBqEUo3p0ZC26E0qU7qIUD7G+FYhE69MxcDlEr1qQLUkVC/gk508os09I4ALW1A4aZoSi1Aez6+rVWx3ieh/s717DNCF1wJ3ShJYkDrirKkCoNQALSiGPREH1/3AO1JaAR02OwbowCtSlwtBnCqir0uUWtAFaEtpkmeI+SR0IHOHZpb70rohgpamTS+KhnQKi0bSpJcHz9O6JCTX6KhcwH97OFaDpOtGNC6oSXgBCicDCi4zFTbQagBtB4Y7wRCQ4COrvDcrA5aWnWmhhVU/oaAOhKaeo70Ckuo93CvDQGFM2ievXwuPdNtiXXx5OPxIC8CFJfHYy5PY511rQC1CG1rI6GTAZ1G6GZ1UB2EVo2q1duA1paPHwD0NEI3dvGXOChpEUBZQrE2bfl4dHmYxfskFJ6sZ931nPxg51ojnh1ADaEbKigAKvtCNDT3kOYzNdzvxQ8AACAASURBVGlDS+NNKXSahNawGOvQcfKXA/TQNwfQK1FQIJQAbYQDKGZMTa1K1BpQU2p6NIVQdxHuMKB2GNqX0GL2fZtTBwVCAdDKAhT2qWJAa0tCoQvmS+imCvr81ZfWXxa/xFGIJQPaNgQoZgoS0JYAbXFRJy7ubGltZ5vi10f5L0ysP22Bp3NooCIUHqa59fObc7YpQPFIyIYmLaOLlz5e9k8ruBsEdAJ2gZ9Q50X7a5BxheclDkgcd/HbbtwwYuYziGcGNKgcoqTUFQPQGoFt6lpJB/7fWkJbV0I7Tr71HtJtZMXN5NWpgSyh22XxqKBQbMPAHDsDgtAGYnSez2R8/HCSaL30wDYOpKFbl5m23fombFYTWUJr9PGooAQo+ngLUNfHQ5mpfvSMduJNCgI6tMRTEbpZHRQHe3GVq4K0wnQRAaX5oDagEwj1SGhtCN0Q0M+++ourUVAXUCyuyDsk6LygRjChae1KaMtRqJ/Q1ntINxumDgFCN8zi5T+0/Johpc6QhJapR0L9Yaj70qFV8lsq6LOHh13HoPaNgVVhAKj06fKbllAs22tAlY9XdwfLTCCh3rsUBNTOHdxFyLSEbiNAa/bxJJ9Ya8IkCSQ0LWs1MVYBWk9x8m1wiefWLv4CthSgFZDZoIsXGlB8HLDkbQscCW05kceqku8mBQhtw4RuByjkSWVFgOL0WAYUFr5qCa3HnLz70j1CuaWQKM1o6B0BWtM9gfXwDQ7AVzgsLSi/r0hCU+3j+e5gHbSu+diPCQd/2H07vJFDYGfwSfftfEAbrjSVOOKLG/bjmYgV7n1T1l0JneTk4aUnrqA7saH3BWgDgGLECZMieRy6xRtVkYSmRkKdSU2DiVIQUGeqT21PDQ3tXT/lvs3I4puaPTx0BpyjQGci4vBFQ15daag+XndMQjWgWVdCxwmNgOomslsDH18in+DYcEsNnHdW17zcgQHFSU1th9BTJLR1Tpk9kdD1CvU1LkqiSjCMdZZ2EIrt7kjoYBjqvvSZhEZAe4DWOB+UJRQmjMAoPe5txxKqnmDPXB4mNARon1B9dYTQ9eqgDY8mgY9vcOZIQ4VQSOMdQi0JbX2Eui+dnUdoBNQ0kXw8Dr2rNB61o0FAVR1UJ/JAaDuDUBOZ2Rsv68tA6Ln3bVYdlHw8jlvQWCfVMeBj2pTYXtEj1AtoZwOLgSV03TV0JzX0zgDFtJUAJSdf0nx6BShvrOEAWo8RCinEcN86hNqJ0shx8qu5eCIUhpIIUJUkwTxZCH5gEL4joZgshgjlNx4gtA0SGgG1egBcWo3T7vRgEtwacvGWhOonyBuDklI/BuLQeiAOdXSlP305fFr3aoDS6CYFoSXNWKZjZUWJCorTRHQ/KAltg9VQ/cZeQtvQWd0RUAdQiMBQOkTNE0Zo1kiFgNa8NxGvC8dbw2FoMFOq/SLq6Ep/gn0bOuVrRUBxnFMRilMSVJ0JJoQaQmsi1JrZNUioeeNeHEon7p19mvz9AFrhVypNQyQqSENp3gjtPFjzlGVbQttJhPpFtKMr3YkjcNmafXfSfZsTg1KrcQSpwbNn8GPKg2qyi4DQ1HIlmlA/oN21Wf0xJWzomUfN3hGgSChWo3EHxprXM/LmL3RSknbyaar7J1WAkpsfuEu+SNTqeh+ieJlmMM84A6Tf0vBzGiIUR5Mw+ixLQT8K3oBR5kmi7hLaBgjtrCxwCVXZ/JkHJd4PoLhZK2780jQ0/lzXargTdghl4dRhKFPZYh1QIwr/BRANdL3t+zpTR7yIrubimwYrbDiliYNQ2sQBhjrRtZRll1CYk4CEDrS988ZeRAvP1rbjf/T9AIpTc2ETxhKzdhrrFLSDGFZc+HaYWhNSCU9GQh03P4Rod45P/7Z5tl/2I7piDNpUKrYBThs89Zm2GQEFhZ3voNjkuvlWxaEDjHqa6hCqEe3l87cOqDkKkX8yD7TubUMka1wpVtKQJy5nJC/fwMbtKgK1EMUnYxxqZfNDd6mDaK/rs76M0gUPoqu5+IYQpUIo9gSUgsuKdw6Aij0uoUutESWmkz+kUxjN+qEor1Q6bZvU+YC+eLLpacfmKET+yTwAZprIQ0esnfoW4WFrcGsg+PIhSneGje4P36VBIVV3y9f1qujUm2qf5+dtjNNvafg5QGXDpQuKRZtGHctTYoEYPL5qu0a0xThHdUKg8b2WOojKpnYZXRvQZ9sex22OoeGfrHNpWicGbfSNoUEUwpM3bajwMopHz1LXCE5tIUoHCvi9m6fuHumotpNu2/i9tvqh4QVapU6YVLeAYQ1KdBkV5nOKNv4BtVraaajdwpUBff6v//0lAf3yzQdltGGEOciLfzIPuEchovHdwTjUMQ+Xu7aZ/ckfVmZxEQt/UAesGLexpnz6adY3A+iLv/7f27p4cxQi/+ScjThBVyb70qWvLvTS7eSW7uCPnfXGfgBGFPTZ6xvHoAEFBTupBy57NQJ64hv7AQgD+vy3f3F5QJ+/arn4yTHoBp0bAV30jf1ohAGlszrXP5DbBvTFE1DtL9+kz4U5CpF/Mg+AndQDl70aAT3xjf1o7K/MBGg+fR1XPIPpoxBH66AX79wI6KJv7Edjn4A+e7n9bNK2jyf1wGWvRkBPfGP/HR4F9CLmxKBPkc5nrKBhO6kHLns1AnriG/vv8A4BlUFo+/Qi+0VE27/tENBo0YxFQKPt2vYH6Jdvrl/WinY1tj9Asfh6gcpBtKuwHQIq7ellNtWLtn/bJ6DSnl7i+Jtou7d9Avr0MsczRdu/7RDQU/z7Jzdv99dS1/YHqJomMsm27tT17f5a6tr+AD3Jtu7U9e3+WurazgCV8qlWfUwKQrfu1PXt/lrq2s4APdW27tT17f5a6toIoM+mStk8i4AO2v211LURQC9wiBfY2UOdW3fq+nZ/LXUtDOiLv77MeM7ZQ51bd+r6dn8tde3TTz3LmTWgmLBssKpzcil0xf762Su/+ZNPPvngFbBvf/LzP8RfyT76nVe+9u4n/NhHv/+T0MvMtdVbSu1020T20e+9q7/h4x9/X/bEaua/w2EFff7aOxdR0bOHOtfrrk9+9lv6J7g13/7kA/XAz//oB598YB774Bsr/hUXABSb1WkTXkBi6Zt6/Mc7A5RQufxhspOHOtfrLgMo3Luf//G7SlA+Qc2UD6jH4Pt6tnpLqZ2dNkn78W/8V/iBvqnHI6DtboY6NaCgHHj/JKhorDb6sTXv2oUV1Gmn5eLV43sDFNb+vvgfly0z7WWoUwGK90t6eXPjOFDTj63q41dvKbez0yYwC1D1+N4A3eK045PWOa/XXRpQuDeugn70uz/45Gdfe1c/dguAdtuEj+1fQS9le1bQHwN+TgzKcqIfuwVAu20CswDddQx6AXProJNWxJOt110K0I//AvTk4+9/w2TxrDb6sVuIQbttwscMoOrxCKjZInQnZSZ2eFzzpFv2s1de+Y0f6JrhTWTxbpuonb06aAT0ZFuvu6w6qGV/62HxJuqgHfO1EywCeqKt111qhMWxj/+y///dyEiSY752wsO7G0m6lO3Rxe/E7q+lru0PULIv/2Trsfid2P211LW9Aqr3Bw3b1p26vt1fS13bL6DRxaPdX0td2y2gT+P+oPTT5Jbu4I+d9cb+O7w/QDlJmjbCelIPXPZqBPTEN/bf4f0BepKd1AOXvRoBPfGN/Xc4ArrW1QjoiW/sv8M7BJTWxk+bsHxSD1z2agT0xDf23+ERQF88ufh0OzhE4dlX3n/28pQnntQDl70aAT3xjf13eATQp29NLEjOs850uxdP7GNo1Lly8Zyk3f+xs97Yj0YY0C//9DKbIHYAhaXxGtDP3/gWAjpyXvwGnRsBXfSN/Wh8+ulj36yzOv/nBjPqX/9MvudTdvEffvMfSUHjWZ37/2NnvbEfjbCCPn/1LThQdmEc+9Y9TPZlu07POE45L362FcFf78c6Dc9PubqsjQAq4Zw4bWOWBctMDOia58Xn6tcid64WM175qhW0OOVXt8+6Fu7DuTHof9gPoGueF39UfVwUTp8Wwd69W0Dz4K9N8LnDb+y/++NZ/MVdfNe+WD8GzRWhKUqo5jK/W0Ddhu8X0MkV83k2BdA1z4vPFaEp3pm7BXTIdXQinzCgR/fXdQG9kI0CuvJ58TkQCv0sAc3h9nCv5kEffz+AHtxfw4BW7q/JlDfGn7x2BYCGzG3iSA8MXz0oQvMcCC0UoceghN4goKq5Gf6gyesCGuQ1AmrZ5K4PXz0AodLq1AW0uDNAcwMoUBcBVbY9oAVKaF6ghBaK0CLo428RUG4utT9X6HUATTohqftrBNSyyV0fvpopQpFOC9CghN4goPk5gIaLxxHQJTg5SEILJNSRUPhxuAx9k4BScwsqt6m25wf8qv7nCOhkm9z14atZpggtkNCCCS2CPv72AC2UhGIobhS0ODgh6UmAhseZIqCT7lviEGoktAj6+NsEFIFSgDJdHUDzMKDBounw3+W/wxFQtEwRyhLKhOZBH3+DgCoJzenzqUjMD05IGgGdbJO7Pnw1SRIA1CKUGM2DEnrbgOYWoMVJgLpDSXk4CI2ATgM0Q0KPBZaaksKy+wK0ILeeqxCccyYEtDhPQSOgU7o+fBUOh0InLzpOPujjbxRQEkuQ0NwF1FJQJyTtAiqcXyOgiwGaIaAHTWg+IqG3ByiFNDmNUBTs6GudJOmkPgI61SZ3ffhqoiU0taLQMR9/o4DmhQJUu/gECTVJfeIC2pn65A4lrQroM9yF5vIHeU22yV0fvppoCU0Ll9CQj789QAtqek4/kMeHxwnQYhqgx85I/doKeullxyfZ5K4fuYqA1lkmUEKdMHRYQm8P0IOSUPXJZCYzDEK7gLrLELRdGNBLrPg4H9ClTElockgPJJ/5wZbQrf++C1mmJNQMV+T0+KFoW3mF/jcJqPyqfmsLdxFd59c8mfUnffpp2jcb0Gk7fMy0rRU00YAKnDbihqFDw503qKAJSWhuMkSUyYIUVMU6Cf5wHFDQ4qIKehEB3QmgQKg4IKGJkdBiMAq9QUAPhfps6u9UFnUAzbuAOt3TBTQ8lDQX0EtEoLsCNFXjSYrQfFBCbw/QTElocdAtZ0AlZwcVhBKg+S4Affr6ueycYlsDyoTWBOjBiEhQQm8SUPLrVuuRxQTYLM4CNFkV0Bd/fQkPvzmgQklogoCKIgcl0U4+90voTQKqJNQEoVS3P7iA5jsB9DIh6G4ArQlQlFB7uNMvoTcIqCWh1PgjzxrZK6AXss0BrQ2gyaHv5PN7ApQabqWIBKg18pljIfSoy6IR0EGb3PXhqx1Ak8PRLdX7JfT2AE3AxxcK0FwXmg4aUJ7O7AF0aE19BHQJQFP28ZVIMwCUCT0EJfQWAc2SRFWYrCD0gC6+A2g+CKgzWyQCugSgKghNREISasoswxJ6o4AeCrvtGITiZzUPA2oNzUdAtU3u+vBVoXy8AdSW0IE06SYBlW1nOjMThNKovB5YIn8yGdDgUFIE9BxADwdFaEhCbxBQLaFOEJoToHl+KCxAzdwRWqKtXqoDaJFEQGfcGb6qABUAKBKaHA/WjIk7AzR3U0QE1PLxJwFaRUCndP3IVcGDSQZQSeiYhN4soMduEJrj4KcGVM26VwtCuntWRkC1Te76kasiNYBmLKHo5PkuHe4FUCDUZIiJ/mj2AM0dQBNr4UcVATU2uetHrkpAHykExYoTAgpOviOhp7zy9QIqmw/NzkwQeqR8sQNoEQEdtcldP3JVAlpbgAoEdExCbw/QVPn4TMKX2T6eptcfDrxnE9SZjmbkE5N69fHtAJrcOKB6Q+VfvgH2Nn7/1tLnJHkABR+fdGqh9wLoIesGobz+g2bcEaDFEKAVrlFWr3zjgLoHy8EZNB++bV2e3PUjVwFQ8PGiAkAzkVAe35PQE175SgFNENCqUIuSTBqf6yCUAM1dQIv7BNQ51AOOn/n1379nXZ7c9SNXhXhEQB8FApoAoeDqDo6E3hGgFISa0U7CUwFa7AbQ569ufMqHcywSSKl0+eDo22VPmpNcto+mzpQYCdVpEg2kLPWG+7RE+fgKfLwJQnHzaZUlwbI4WEeYq+6AR621chLQ1jp+TvbmnD8pDChMB3226bJj+2A5/P7Fd20VnawNI1eF9vEIqPTxPODZkdDc89xZbzx6tZ3c0iWy+B6gjKgClGNQzBdzVWfqKmhyOQXFoxAvcOLxNAX9XB8/o+PQyV0/dtUHqOTTrjTlXR9/e4AaH8+A2rO58KSJAxeYaHMHe2jeBlRYGyvPBlT0bUcKasegH35PPbo0oKID6KPI0MfTiLw1cdkpNN0eoEIBmhCgbhA6BCh1i+4bBlT1VBKezjQzBv3yzYdLLOsMZfH6YDly7CCjv/6HhctMAOijBWgi8C4dyMfbEnrrgNYMqOPjORLXWVKhfvECmmMhVFwE0OevvdN+doEsabQOiifNkaf/5RtvfPM9dXVy14/cGAQUCLUBNeOd1tqPya98tYACoQpQ1fCjA2i+G0BhVfzmpx2HbHLXj9wYH6DJY19CnSD0FgFNHEATAyhGobkBNHEALawzlnqArpkkba+gYZvc9SM3Rv6TOoDCXVKADknoDQKqsiRLQXMHUJwS6gE0qQ8dQBWWSZjQmTHoZw8PL+1587DJXT9yVWaGFIQKweuTENCExzvzOwFUZ0kIKM2pN0HoQRWacqzUF6rMRIAWmwB6IdsLoHWlAFUSioBaEmr7+JsElILQqpLuXQKqfbzy8LmKeBIaCuW5I31AczVjJAK6HKD1oxfQo7PVXd597qw3Hr06vaVLAtpUouvjC6LTDMxrQJMiBGgRAZ3U9SM3RgOaUBCqfTxU6x0JvXFAEwtQ4+MVoJQllS6g+D9FQL02vetHbgxOWXYBzXQQevSPdt4soEkmDKBqsLMwWVIEdLJN7/qRGwMJLABaCQUo1JkarNaThOaq1DTxla8RUAHFDAI0wSDUTArlNL4YBlQVQgnQQjChTQR0StePXGVAaxtQVWgalNDbB9Ty8XgQNNCpAc1UGm9GPvFF8iqJgCqb3PUjV3uAChvQgyOhNw5o0gVUNRsENARo0gGU+ykCugAnqRB9QBOVJSXHLPGV6m8X0CSrkgMGoUkvCFVTR0ydSc2+4yBUAioJLVQhNAK6BKDk3B4R0FTHoAAojSYlPKXHIfT2AK25yFYjoAkByrV6BlRFn0FAZRBa5NHFt4sCKhSgequ7mhUUJPTgkdAbBbQmBRWujz+idHKWRIBmEdBRm971watC+fhSJ0kCAK0y9vGwpZYJQvMpr3zdgAoFqD752c6SpgBaREDb5QEVNqBJUpGPT7IjAlq4Pv4mAaUgNM0gSzoioIkBtCBAj26WhD2DG9/ia2hAidD7BnQhk4C2ok3bTh1UASollPYS0xK68d+7mgnZCwQoVjEA0Nz4eBWEHgsLUF5Dh4DiayCgLQCKvzbzVs1dOaDTtSF8NaUJdwSoJrTWgMo8qR+F3qqC1gQoS6hqtAlCi2PiKGhewWB8ogqhXQVt7llBp3d98KpQgAoHUK2gh6wjoRNe+ToBTQlQDL4VoEkH0AMBShNHZF8cGdBE7R5aXQ7QzdfFj9j0rg9eHQQUv9J+tgcDKBN6o4DWOB0U60zKx/NgpwlCCdAjZUkFAgocW4DmNqABQucB+uWbb228qnPEpnd98KqALAnm1BsXT0kSTt4lCc3oIMvbBhQ3CICGw7JW2fajqnd2siTeBccLaMGA5hcAFNfF38OaJARUEtoDVPt4JwqlStPtASpsQBMCVJsdhGJHqDpTVmHSpNL4Asc6lwO07NvdAarqTBLQynXxOkvKjnQOsiWhtwkoBqEKUEmo3qHJByh+VDuA5hpQJHR9F3+BRUm7AtSqM1WYJeEuOCShxsfntwsoSKigND456tkiHIQaQPlApSFAk0sACknSv7nAebJbAyo8gAob0I6PpxGUmwQ07QOqR+NJQiGNdwEtPICWKksqVgVU2rZ7M43Y5K4fuTEqS6rcILSiNP7RklDLx98goEIDWmW4jZgtoYn28Ue1h8MQoInIFaDJqi4e9mZ6+Vx6ptseAK07gJKLT0oL0EyvkUcJvV1AJVXCArToAqrqTJTG59YocH1ZQGFd/LZ7M43Y5K6fcGMgjVeA8tmIFWVJScbb4LijSTcPqFTRowWoG4RagKo9nJLLA3oh2wOgwgMop/Gcx2sfn/OA/Pw3Hr86vaWLAEpbrCQIKI4nJcfMAArttgDNeCxJZkkUlLqAUp0pj4BO6fqxG9MH1CqEJo8ZH4/opEm3B2ilsyQEVHQATVSWxIAWNqC5ArQwgAKheRM8DDECOlNBVZbEiTxVBXNdrJ/5xuNXp7d0SUDLBnauQEBNFKoAPVKWxGs/IqAhm9z14atYY8L/cEo9EOoACsN+pKB612G1c9a8Nx6/Or2lSwLaEKBJ18erIFTVmQhQmM4EHFIarwBNIqBL7iwyCOijmTCSddOk+W88enV6SxcBlLKkumpEk2Gtqe/je3UmADQvGvxfagK0iICSTe76kavKx4uqFE4an1C9+hEkNHEkdJTQ6weUfbwHUK4zZZzGO4DmCCg8HAFdAVBWUF53XAmpoDioctCATpXQKwRUaEArAhQHk7SE2lmSArRQCkq9kiCgVWID2tw0oPooRHUGonmgXQzQygU0tQElyw48LTQrrErT7Dcevzq9pQsBKlICtPIFoSShx26dyQCaI6A5AlpA0Ur+etOAWkch0tEe7tmIk7s+fLXCG0OASh9f6SBUA4rHVGcA6NGqNM1+4/Gr01u6AKClypIsQLO+jz9iloSA5gZQlcYbQBNx+4CaY2j49C7nbMTFAU01oDgYn6osHiqhOo+fKKE3Auh4llQRoA0DWuBsERfQYUKvHVBzkBefgWgeWPAoRAC0TUXbMqCPDKguM/HxVgioPW95offfi0lAW5G2aVtVqhAKQWjiDCaFAW1bA2gOCzsJ0LP/pL0Dao5C5DMQ7bMRl1NQqjOpSn2VegClA9jYx6slY3PfePxqO7mlCyhoo9J4IQEVGW+hZkvoAQnVgGYEKP7ccAxa5E4h9G4UFO3Dt90HJnd9+CpQWXMM2gP00QShmCXZSz/mvvH41XZyS5dIkhxAkwZ9/KHv4900vqLC230C6oacEtBVYlChgtCKAEUfTxNCS1dCD7jyY5KEXiugkMYDoAkCCvULC9BCp/F5cSiSHqC4WT0CWlwI0Odff3/9ExGnHIXIZyBaZyO2ywNKE0JLC1BLQmnWnS2htwdoSRJqA4pFNtvH82g8jHliGi8BPfoAzXOoM0lA8xUB/QzWxb948ta685YnHYXIZyCuUQfVgAoGNKU6U2MFoQZQs4XDzQFaVgbQ1ACadIJQHo03gFZm2r0H0NBQ0kxAn770I6mgsOoDlXQt23okqeoB+ohBqAuoCUInSeg1Aiq4zlQJBBSOJQcfn+hN7jpZEi08rghQDkItQKHOVMwFtOpb18Wvvvp4Z4AKL6Cm0nSYJKHXDmgiGpwVikFopQd4eYtQAPSg0/iKgtDEBbRYBNAJMejqZ8puD2jNgApS0Jq2WWZA7SAUlyYd1HDSDQKKWZIGNOEgtHKDUBvQwgCKCppfHtCbV9ASC6GwLolcfFmjhHYUNDFZkpHQeW88fnV6S5cYSeoCmqks6Vg4Pp7SeAxCOY03hdAE9r5BQJNLAXrzMagGtBIhQLWPP06R0OsHFIJQ8vHZUW9Wr7YNU1lSCND8QoC+ePL6Zll82CZ3ffgqufguoN0YVAM6zcdfMaB1F9DEOjr+kNtpfJErQDltTAhQLoTW4hKAblgHHbHJXR++WtlZUomA4lbYVWPVQTWgmCYdR+eLXCGguhBKgFaNmgtr0vhOEKrqTMOArltmupDtCdASAK3oMBoC1NHQnoTOeuPxq9NbuoyCEqBCNJVI0oaroHaWVBReQHUEkBSJAjQnQIPz7SKgJwCKWZIEFNN4CkI7Lj47QUKvFdAa12dpQJHOQ1YlBlDUyyNvd2OGkixAc1MIhXlOEdCZ963SQSjNWCZAhQJU+Xg1o8lOk24LUApCAVAY60ybUmQIKPzrBKFHAjRXk+odQCmBj4C2ywNaGUCFUdBeEAoSejzeMqAYhKYNB6GVHYSqdcfHDH282p5JF0IZUFjYaQAdJDQCehagKkvqxKAE6EQJvUJAhUrj5VcqhJKPdwEtOI3PLUDVdhY2oAUWQgHQwGyRCOj0GLS2AZVZEsyI5P0XuwqKEnq4OUArBWiDgFYSUPTxDCiXQY+NHYTmGlCukcJjFSkoniobns4UAT0pSYK1OAjoo0zpUw+gmZZQ8vH58BY4Vwho4wAqe6PBvcAloCWW6ksKQhtPlmSK+Fi6T3JVZ4qALggoSqgLqM/HKwkN+/grBrR2AM0wSzqaI8kVoBl7dg0odUcEdHGrjIQqQFsH0I6Pz/BMBe3jb2btXAM1NlhAyICmUGyyfDxKaI6A4mg8zhfhLEkDWphCqAS0zQnQc/+kKwd0sjaEr1YqS2oI0KasHnErBzXW6QCagY+XHv7A5/4OSOhVKmgpyo6CGkD1LNgjFj7RxzOgmQfQnNL4410r6OSuD189BdDM4+O9hF4hoGUf0ISDUAK0cH28DkIJUJ3GI6BFBHRRQIUCtOoDmvYlNMNSU2jGyJUC6sagJUloRS3vAgoEchqv6VRjnXlCaXwEdFFAU57OVNaPMggtdSG0X2iimfUBH3+NgHKWBAvkYY181bCPr7IKtlZRIkmAqiCU60w6jY+AGpvc9eGrlSqEEqCNAlSUQ4BmzsFJXkKvEFBI4+mD2tiA4uGyMo2vWEJRO2WjdRDaBRQhTahSf8zFqoDyROVV5ytvDmhpFBR+ahoAtCZAU4dQKwhVPn5IQq8f0LRKANAEFRS+Hkq9WFBlSYUqBltZEgMqsyTM5QUMdQ4ROhfQz+g47s/WPZV7F4Byyl2umQAAEqxJREFUlgSASh8v6scgoFhpMoB6CL1OQEsfoA0BejRpkvbxedarMykVBUBzIf+nFQGlZcfq22q2K0BhHKUsH/2Amil3xscPSOgVAloqQCsGFNN4ABTbrWOanGUTJDTTWVJeWPxqQNu5gDZ9u18XT4CCjwdAZZZkZouM+Pg+odcIaNkHtBQ03y7JhCS05Cl3RW4A5TpT4QBKWVKCdaY1Xfz9AKqD0BIBpYXIAGjfx+NWtgf28YMSekuAYpZkAcpBKO/VJH/TgOZFCQFokVMaL79RGl8PEBoBPR1QgYA+4hoQL6CWhBpAe4ReIaANFj41oFWKgAqdJR2OpSnHk4TycYheQHHaHQM6JKER0GllptIFVJTiUf4DN0gDaqYtKwnVo0leCb1GQEsNKIxyNikrKBzbWUG7j6WdIxkfj/NGFKB07GyCOhsBXQbQ0q7UW4AKa8ZyX0JdH98l9AoBrfqA4gZiHITKppecJkEQyoUmncbzaCcCikGoFFMEVERAZ963SqfxCGgDgEo+5W8DgGY9Cb0NQBsDqPyUIqAVAVphlnQodaUJAQV5dACVlpQIqPTxWAiFbB4r9X5CZwN6EdscUGswXrr7BsaS+oA+KkBNFBry8VcKaGkAlV+pzqQUtJIKSjNk6DgvBlTNqec0vqSSUwfQAQmNgJ4IqCBA0ceL0gbULoWyhOKMkSEJvUZAq9ICtBQaUF5+nFkSyivnVDSaW1kSzFjGOlMB2XsEdErXj90Ynm8HcyQUoFgIrbw+PjE+/jgooVcIKDQefTyc8gGApgbQKmNAj6oSShIqISw4jS80oMgqPJ7UhxsH1Gyo/MV34BgadeAc2eSuD191AYU5EhSEVnal3uTxRkJ5bRLfrNPfePxqO7mliwBalqbOJLSClgQopPKlPk/X8vGcxvMoU5lbgMpY4Ciz+PpWATUHy8HRHnAUDR04xza560euqjS+C6gvS+pIqARUHUyT+156zp9VXx7QxgOocAGlTRpodXxCQaiVJWkFJWVNcg2ol9AxQPdhU075+Bww/fBtPnCObXLXj1z1AioeCVB1cKcitE6sRP54HJLQKwRUNtyqMzUEaAqAwkhSCT6+FAcqhh54DAl9vZPGl4wplOtvHlD3WCT5Ex841y560lyrsiS4IVBmkjdHiPbRVVCzw4gloejjSUKvf/FcF1Ash9LR5JjHi6yRMeihhD1EjsbHJ2pKaOEAKgktqdjU5C302dbNO9+mnDTX0pk0fOAcX56sDeGrpQK0YUBrzpIqBFSt+FCAsoSaNMkroVepoFUP0EY6kLIkQKssKw+CBuTzQm8w4gLK4gmAQqU+x3XH9VAQeksK+qsffo8f1XHo5K4PXy1VltQYBS1xx3oJaNnz8ZwneST01Dcev9pObukygJb2UJIFaJU10scL+O9Yko8v9PJ4Pd0u7wCK5XoNqI/QawfUOljui+/o9GhxQNW6TiivwFAnB6EYk5b6SO6AhB65GHjiG49fbSe3dBlAKwvQVGVJFqCNDEItQNVe4B1A4ZfyLgA1B8sxn3zgHF+e3PUjN6b0A1rBUJ8EtOvjOQrNghJ6hYBKQrnOZAOaEqAUh2YaUDUX9pirLCnXLr4HaDLk468dUHPSHNQ/IT3iA+fIpnd98KoEtCRAIfCCrw1NiwRAH/sK6gDqSOiJbzx+dXpLFxlJUlmSC2jCgMI3ncbn2sdTEFr0AIVp9VCHumlAwza560dujFZQmgeJgNYaUKHZtH18ogH1S+h1AspZErZccwqA0lRtKDYJNW35QK79SJvYFnYarwGFZcewbG7Ix0dAp9y3RqXxVaUAbWArbAvQnoRmHgm9HUDRl+B0QwK0JEBxUqgENGuMhBbHTJVBeeUcAkpjSViGEhiE+iU0AjoJUCWhFW5HRBJaUpKUPtZCs6kB9aVJnSzpCgEtvYCWQCgCWmZJg4CWjZZQPraT06SGAa04CM1VIbSOgM64b1XjANooQEuYOVLCpJGhKPTgSKjj468QUGg+AopeBFdn2YDCP1UJM0YIUBOFJqosqoLQin18qYLQOgI6475pQBsLUGEBCifLBiT04JPQKwVU15ngJ9hopWFAK5LQEiDVCopQqiCUCSVACx+gfUIjoCcBWtI6Rh7rBEGtYAWyqFOfgnok1CL0CgEtlYKWCChLqPxaEaAZ+fjqUDaVllCdJZk0CRWUg1Ch03ivhEZAJ903CkIB0AaHkipK4wlQgT5e+AtNjoQ6adKVAgoNhvBG/iC7A7/B6VGwlW+G8+7Qx0tAcy2hnCXZQWgElGxy14evViShrKDKxzOgKQDql1ACNLMItST0CgGtSgZUEJlQtJeP9ACtykOTKAk9oo/nhZ3k4xnQEvdYTsjFD1RCI6CnAFrTdKZGAYplpxRmjdQTJdSq1l8hoLaPR0AFAQpjSdLhE6FllkEUlGgJ7fl4VWfCCU0WoHUE9Mz71gFUT7hrNKBaQocAVauTjIZeIaBlB9CKFDR1AMVMSeaOWkLzohuEUp0JfbzaY7ke8PER0BMALTEIxVqLBhRcfE0SGia0J6FXDigsvlaAorOvUD4FZkoAaMU1JRqPNzNGcidLyjEIbUQy4OMjoFPuW+kGofiPDMVqBlSEAc1cCVWEXiGgDQahJa8taDCbF7QCmQGFIc9S5vNlc+DTO9V4fO5KaJXQj0kEdElASwtQ3DyLJktI3197fbzr5M2su3ziG49fnd7SJQAtNaANKmhV0thviiXhJKFKPQHKByDjnDvM482sZciSCjsIlawzoeMt3aNtDaikUwehJcpIo+ZK0JqH2glC66CEFtcLKDhuaH6NQSgDCrFoBYAmSkJhYn1zKPmE7tz18RagKghFBR2Q0AjoSYBWmCWVDU0XsQAdqtVnDqFHm9CrBBQ/nGVJgFLFHpMlVFCSUAESClvdwoGcWkLzQksoDiJVPK7EgOYwGneHgC5kFfv41gG0RB8Prl6IVrTtsI/PMktCeSuxjZt0lsH+oAhoaQ6NwqGKilx8CYOdDQJallpCocXH3PHxBtACz0tqCslnm7Ttla6c21pBS5ZQ3IexqURpASoFRPn43sokBrR2JZRrTdeooOzjAVBagY1ZI0TmAjetQgkFXyMzJVtCEdBCJ/EKUJLQA6w71hI62tI92taAIpc2oCihBlBKkwYB1RrKc0YI0asEtMQYHAiFzZkQUJw1Ah/aEiUUs3gEFAfoHUK1j0dAtY+HND6hKLTn4yOgkwAtcevWqqa0XVCaVHIQikfH1+KxTusAoVpC7URp3p9l37ZTnnP6VT2SBB0BPIKPb4jLhlw90EhRaIkSKj29klD28Y3eRUxKaJVrQNHHD0loBHRSklSRjy9JQUvy8SUHoQIlFHy8St8fgxI6idBdAlqWKtgp1ZE8NHRRAqmQxZdYrQcJxe7KlJPHE2lYQrWPp5o9nirb5DhUHAE9777hpm687gMBVRJKLh4IfZQSKjH1EFo7hNoaOvfPsm/bKc85/ar2JGWpAcUxNZRQfERgnYlroQQo+PhEaAmt9EaMakaoCkJRQUlCI6Dn3DfMBBqaylSxXhhAS5RQ3BLcAVRtx1j3JHQCobsFVIY7yF5pAIVMKTWA4tIk6eAhFjgMSGhZJCqPLxMAVOQHlNBuEBoBnebiK3RuRCdlTABoIxhQkFAxJKEuoRM1dJeAkoRSEEole5bQiupNCcwRgVJThQPyEIpWloQaQmGD5SrXPh7SeOnnmdCRlu7RNgcUqWQXT1NCsR5oABUgofWjltAphF4foI0CtMSzTirbx2NXJJjJl5aEwkHdXPs98tJOHo9HCYV/wccDoIdc9CU0AjoJ0AZ9fMWMlpQ0NWXaYOEeF3imNQAqHEL1jqG9TH6U0F0CSnsz4SgRTPkUJKE41lnRoAVco1XyKKHAbXJUI55Hdd4JjXeaNOmAWTxKaDdNioBOAxSXx2kB5aXHZUmAkoTirCa/hCa2hFqZUoDQfQJakYRikbNsWEKFApSL+KCh8D+ik5dimhytSU2FKtDnSCgNJh2gBJULn4RGQCdl8SShODrCY52YHEDFHn7Fc2ZTnNJ0KqFz/iz7tp3ynNOvakCRQNygSQNK85k4LhUAaCX/BUBhalMFx9RoDbWdfF4oHw9r4zGN90hoBHRamamh8wNKDkFLmrYsStwjs2ZCSUKDhB4cQgMSuktAidCKQ3KczqQAxQndPFCPWzWVGRJaoZPns2kKHYaSpHIiXwKghtAI6Mn3TVNZooSCetBG4DjoWYkaNwuVifwjSOiJhPoR3SWgFTl5DSjV2UrcFt2SUJi6DAtAMpFl1UF6GnLyZkxerZHXadKBCe1LaAR0YpmJxktUJk+1FhqVhzS+5kwea6F17Ss2dQg9jBC6S0AdQkvcelIN/gqaLoLuP8FN60soiMqEHibck5MHx94nFM9TgO1vGp+ERkAn3beG99RgQgUSisUVPLIype1s0cmnY4RmfUI9iO4S0AYJRQqpEArt5qwRJ9qj/y9hS1uponiqAtREm8yEoYpQ3OKOJDRHH49j9f1aaAR0kouvcaWxKtTjBJ6Sln5gyam0CBU2oe7cULfcdLBy+fNPk5/e0iUAlQ2vVZkNJBTXf+DJZiCgKWIKEprgtwz3DJX/SEKPx4onhypCYVk8E5rnLqER0BPvG0ymb1hCVaGJEnj8R96LNGVCYUTJEVHH6smI7hXQhkZ3q4adCPj2slGJEhxJk5YwL5Rm30lEYYVSBk5eI3o86llNufbxvNMyjcjDv4Mt3aNNOmmOfzIPtIsW6pFFI6FNQ/cHnBp4/JIJRRElRH2EupObdNG+j+guAVWI8upO6hY1dVlgkoRZUkq5fokqWkFrYdHR4VgpRM3kep4XmhOiilBpQgy0dI825aQ5/sk8AHZC14eu4jp4npmrRLRpeLoElu3xtjChKTv6Ng0jao98Hrux6E4BJTdfNVR204rKFXuaSCNKEtdGIQomkLsDI6r9Bk8XRZPXYdJIXqsdgYW3pXu0Kad88E/WsR/tckkSM9pUqsxEjFJcqrZxKFNGFBhN8Us6hVFFaa7shD/r8oCiP6EMEfnTvNJ50PxdlfKxpl/p5sq2V82BED1a4/Kq5RJR+WQViEJMdO2AmnOS+CfzwJInzZE1a5kqPR3yibZsu2Z1RFkyp12rxk1XMXbb0ok25aQ5/sk5em5BBV386kIv3U5u6Q7+2FlvvCphM+0sBQU7qQcuezUCeuIbr0rYTNtBDLr41QjoiW+8MmOzbMpJc/yTeQDspB647NUI6IlvvCphM23KSXNr1kHXuBoBPfGN10Vsnm09krTG1QjoiW+8DErrWAR08Or0lu7gj531xsugtI5FQAevTm/pDv7YWW+8DErr2Jq7280p5s8aCLj0G1/VH7vMky9mEdAFnntVf+wyT76YRUAXeO5V/bHLPPliFgFd4LlX9ccu8+SL2dY7LEeLFrQIaLRdWwQ02q4tAhpt1xYBjbZrWwfQX//dG998rzO7ZKp98Z03vvXT856LkwF9M1umPle+9xtvn/LcOQ2d0dI5DT2zpVvZOoB++DZMw3dX2U00mBL9y/Oe+zncb+8Kv4nPhff+4rvvnfDcGQ2d0dI5DT23pVvZKoDC1ObWnvJ8guG8/b/66RnP/fCb/whTA32zqyc+93O4Vx++Pf25cxp6fkvnNPTclm5mqwD6xZ//H/B87hqRica6ctZzoa+961MmPpfff/pz5zR0TkvnNPS8lm5m6wD6nbeh/9xVdlONwqKzngtd713hN/G5La0emP7cWQ2d0dI5DT2vpZvZSgp65ocbnvvd99rPv/XTjRT0Vz/8XnuCIM5p6JyWLqCgJ7Z0M1snBv3v2O6zIhz+UJ8Xv54fmqncVma2J4SUcxo6p6VzGnpeSzez1bJ4+eF0V9lNNNaV8577Zz/1r/Cb+Fy6a6c8d0ZD57R0TkPPbOlWtg6gMro6t5bZfv7G2aXFuXXQX74B9vYJz53T0BktnV0HPb2lW1kcSYq2a4uARtu1RUCj7doioNF2bRHQaLu2CGi0XVsE1LZ/+af2+WvvbP1XRLMsAmpZhHN/FgG1LAK6P4uAGnv+6sPD6xLS56/9CH+SX95q2xdPHh6+8j5dhd+jXdQioJaBggKgr371F+2zB/jylfdfPHm5bZ999Reors9fjYRe2CKglmlA32IW5S+fgXp++eZbz7/+/tZ/3l1aBNQyBSiKJX959oD2evv04eHlrf/AO7QIqGVeQKWnZ/vyTQxGo13SIqCW+QD97CUrs5eufru/7j4tAmoZ8NcF9MUTKaGSUoxFYx3q4hYBte3pw8tdQLHMBCr62QN9j3ZRi4BG27VFQKPt2iKg0XZtEdBou7YIaLRdWwQ02q4tAhpt1xYBjbZri4BG27VFQKPt2v4/aCgW0SAbBtcAAAAASUVORK5CYII=" /><!-- --></p>
<h2 id="calculate-life-expectancy-mean-survival-for-each-patient">Calculate life expectancy (mean survival) for each patient</h2>
<p>The following sums over the distribution of survival on time to obtain the mean survival, which is the life expectancy.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>le <span class="ot">&lt;-</span> <span class="fu">apply</span>(tot_surv, <span class="dv">1</span>, <span class="cf">function</span>(x) {</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span>x</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># calculate proportion who died in the interval</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> x <span class="sc">-</span> <span class="fu">lag</span>(x, <span class="at">default =</span> <span class="dv">0</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the expectation of death</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(x <span class="sc">*</span> times_vect)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>le_check <span class="ot">&lt;-</span> <span class="fu">apply</span>(tot_surv, <span class="dv">1</span>, <span class="cf">function</span>(x) {</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span>x</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># calculate proportion who died in the interval</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> x <span class="sc">-</span> <span class="fu">lag</span>(x, <span class="at">default =</span> <span class="dv">0</span>)</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the expectation of death</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(x)</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(le_check <span class="sc">==</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(le,  <span class="fu">paste0</span>(<span class="st">&quot;Data/&quot;</span>, params<span class="sc">$</span>sex, <span class="st">&quot;_&quot;</span>, params<span class="sc">$</span>correlation, <span class="st">&quot;_&quot;</span>, params<span class="sc">$</span>correlation_como, <span class="st">&quot;_le_pre_offset.Rds&quot;</span>))</span></code></pre></div>
<h2 id="offset-life-expectancy-to-allow-for-the-fact-that-the-le-in-wales-is-lower-than-the-who-levels">Offset life expectancy to allow for the fact that the LE in Wales is lower than the WHO levels</h2>
<p>The following corrects for the fact that the intercept-only life expectancy from the models in Wales are slightly lower than those in the WHO GBD life-expectancy tables. The Wales life expectancies are multiplied by between 1.07 and 1.02 depending on the age.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>who <span class="ot">&lt;-</span> who <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">who_ratio =</span> who_remain<span class="sc">/</span>expect_remain_years,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">who_le_ratio =</span> (who_remain<span class="sc">+</span>age)<span class="sc">/</span>(expect_remain_years <span class="sc">+</span> age))</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(who<span class="sc">$</span>who_le_ratio)</span></code></pre></div>
<pre><code>## [1] 1.050812</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;men&quot;</span>){</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  who_offset <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">55</span> <span class="sc">~</span> <span class="fl">1.07</span>,</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">65</span> <span class="sc">~</span> <span class="fl">1.06</span>,</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">75</span> <span class="sc">~</span> <span class="fl">1.04</span>,</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">85</span> <span class="sc">~</span> <span class="fl">1.02</span>,</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;women&quot;</span>){</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  who_offset <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">55</span> <span class="sc">~</span> <span class="fl">1.04</span>,</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">65</span> <span class="sc">~</span> <span class="fl">1.03</span>,</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">75</span> <span class="sc">~</span> <span class="fl">1.02</span>,</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">85</span> <span class="sc">~</span> <span class="fl">1.01</span>,</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>le <span class="ot">&lt;-</span> le <span class="sc">*</span> who_offset</span></code></pre></div>
<h2 id="years-of-life-lost">Years of life lost</h2>
<p>The following calculates the years of life lost from the age, sex and comorbidity defined survival and the age and comorbidities at death from the ISS data.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>yll <span class="ot">&lt;-</span> le <span class="sc">-</span> age_smpls</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(age_smpls, yll, <span class="at">xlab =</span> <span class="st">&quot;Age (years)&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Years of life lost&quot;</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(yll, <span class="at">breaks =</span> <span class="dv">50</span>, <span class="at">xlab =</span> <span class="st">&quot;Years of life lost&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Number of simulated patients&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<h2 id="compare-yll-using-who-tables-and-comorbidity-based-assesment">Compare YLL using WHO tables and comorbidity-based assesment</h2>
<p>Among those over 50 for which both methods were used, the WHO tables based estimates of YLL, and our estimates which additionally accomodate comorbidity, yielded similar per capita YLL; the values were 14 and 13.69 respectively.</p>
<h2 id="yll-by-age-and-comorbidity">YLL by age and comorbidity</h2>
<p>The following shows the distribution of YLL by age, sex and comorbidity by age categories.</p>
<h3 id="table-yll-per-capita-by-comorbidity-count-and-age">Table YLL per capita by comorbidity count, and age</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>yll_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">yll =</span> yll) <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">comorbidity_count =</span> <span class="fu">factor</span>(italy_count, <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">age =</span> <span class="fu">round</span>(age_smpls),</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">age_cat =</span> Hmisc<span class="sc">::</span><span class="fu">cut2</span>(age, <span class="at">cuts =</span> <span class="fu">seq</span>(<span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">10</span>)))</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>yll_smry <span class="ot">&lt;-</span> yll_df <span class="sc">%&gt;%</span> </span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(comorbidity_count, age_cat) <span class="sc">%&gt;%</span> </span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">yll =</span> <span class="fu">mean</span>(yll) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Comorbidity count</span><span class="st">`</span> <span class="ot">=</span> comorbidity_count) <span class="sc">%&gt;%</span> </span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(age_cat, yll)</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;comorbidity_count&#39; (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(yll_smry)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Comorbidity count</th>
<th align="right">[ 50, 60)</th>
<th align="right">[ 60, 70)</th>
<th align="right">[ 70, 80)</th>
<th align="right">[ 80,110]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">0</td>
<td align="right">35.61</td>
<td align="right">26.51</td>
<td align="right">17.87</td>
<td align="right">6.64</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">35.40</td>
<td align="right">26.26</td>
<td align="right">17.15</td>
<td align="right">6.29</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">32.14</td>
<td align="right">24.56</td>
<td align="right">15.60</td>
<td align="right">6.02</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="right">29.35</td>
<td align="right">22.36</td>
<td align="right">14.80</td>
<td align="right">5.46</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="right">28.02</td>
<td align="right">21.15</td>
<td align="right">13.61</td>
<td align="right">4.80</td>
</tr>
<tr class="even">
<td align="left">5</td>
<td align="right">16.50</td>
<td align="right">13.38</td>
<td align="right">9.74</td>
<td align="right">4.94</td>
</tr>
<tr class="odd">
<td align="left">6</td>
<td align="right">12.03</td>
<td align="right">9.51</td>
<td align="right">8.12</td>
<td align="right">3.84</td>
</tr>
<tr class="even">
<td align="left">7</td>
<td align="right">9.19</td>
<td align="right">8.39</td>
<td align="right">6.63</td>
<td align="right">4.27</td>
</tr>
<tr class="odd">
<td align="left">8</td>
<td align="right">6.34</td>
<td align="right">5.95</td>
<td align="right">5.00</td>
<td align="right">3.19</td>
</tr>
<tr class="even">
<td align="left">9</td>
<td align="right">4.58</td>
<td align="right">4.30</td>
<td align="right">3.53</td>
<td align="right">1.83</td>
</tr>
<tr class="odd">
<td align="left">10</td>
<td align="right">4.27</td>
<td align="right">4.04</td>
<td align="right">3.24</td>
<td align="right">1.50</td>
</tr>
<tr class="even">
<td align="left">11</td>
<td align="right">4.19</td>
<td align="right">3.92</td>
<td align="right">3.06</td>
<td align="right">1.34</td>
</tr>
</tbody>
</table>
<h2 id="plot-distribution-of-years-of-life-lost-by-age-and-comrobidity-count">Plot distribution of years of life lost by age and comrobidity count</h2>
<p>Plot distributions of YLL overall, then stratified by age, with colour indicating the comorbidity count.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>plot1_yll <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(yll_df, <span class="fu">aes</span>(<span class="at">x =</span> yll,  <span class="at">fill =</span> comorbidity_count)) <span class="sc">+</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>) <span class="sc">+</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;Number of simulated patients&quot;</span>) <span class="sc">+</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="st">&quot;Years of life lost&quot;</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>plot1_yll</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>plot2_yll <span class="ot">&lt;-</span> plot1_yll <span class="sc">+</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> age_cat) </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>plot2_yll</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<h2 id="crude-approach-to-obtain-95-credible-interval">Crude approach to obtain 95% credible interval</h2>
<p>The following approach uses empirical bootstrapping to calculate an uncertainty interval around the mean YLL. This</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">map_dbl</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>, <span class="sc">~</span>  <span class="fu">mean</span>(<span class="fu">sample</span>(yll, <span class="dv">404</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(res, <span class="at">xlab =</span> <span class="st">&quot;Mean Years of Life Lost&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>est <span class="ot">&lt;-</span> <span class="fu">mean</span>(res, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">1</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>lci_uci <span class="ot">&lt;-</span> <span class="fu">quantile</span>(res, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>est</span></code></pre></div>
<pre><code>## [1] 13.7</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>lci_uci</span></code></pre></div>
<pre><code>## [1] &quot;12.6-14.7&quot;</code></pre>
<p>The mean and (95% credible interval) for the years of life lost using this approach was 13.7 (95% CI 12.6-14.7).</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>mylist <span class="ot">&lt;-</span> <span class="fu">list</span>(est, lci_uci, mean_age_restricted, mean_age_whole,</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>               plot_ages1, plot_ages2, plot_ages3, plot_surv, plot1_yll, plot2_yll,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>               who, yll_df, yll_mean_who_restricted, yll_mean_who_whole, yll_smry)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(mylist, <span class="fu">paste0</span>(<span class="st">&quot;Output_rmd/&quot;</span>, </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>                       params<span class="sc">$</span>sex, <span class="st">&quot;_&quot;</span>, </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>                       params<span class="sc">$</span>correlation, <span class="st">&quot;_&quot;</span>, </span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>                       params<span class="sc">$</span>correlation_como, <span class="st">&quot;_&quot;</span>, </span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>                       params<span class="sc">$</span>sd_como_age,</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;.Rds&quot;</span>))</span></code></pre></div>

</body>
</html>
