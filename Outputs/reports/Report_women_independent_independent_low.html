<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
@font-face {
font-family: octicons-link;
src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}
body {
-webkit-text-size-adjust: 100%;
text-size-adjust: 100%;
color: #333;
font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
font-size: 16px;
line-height: 1.6;
word-wrap: break-word;
}
a {
background-color: transparent;
}
a:active,
a:hover {
outline: 0;
}
strong {
font-weight: bold;
}
h1 {
font-size: 2em;
margin: 0.67em 0;
}
img {
border: 0;
}
hr {
box-sizing: content-box;
height: 0;
}
pre {
overflow: auto;
}
code,
kbd,
pre {
font-family: monospace, monospace;
font-size: 1em;
}
input {
color: inherit;
font: inherit;
margin: 0;
}
html input[disabled] {
cursor: default;
}
input {
line-height: normal;
}
input[type="checkbox"] {
box-sizing: border-box;
padding: 0;
}
table {
border-collapse: collapse;
border-spacing: 0;
}
td,
th {
padding: 0;
}
* {
box-sizing: border-box;
}
input {
font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
a {
color: #4078c0;
text-decoration: none;
}
a:hover,
a:active {
text-decoration: underline;
}
hr {
height: 0;
margin: 15px 0;
overflow: hidden;
background: transparent;
border: 0;
border-bottom: 1px solid #ddd;
}
hr:before {
display: table;
content: "";
}
hr:after {
display: table;
clear: both;
content: "";
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 15px;
margin-bottom: 15px;
line-height: 1.1;
}
h1 {
font-size: 30px;
}
h2 {
font-size: 21px;
}
h3 {
font-size: 16px;
}
h4 {
font-size: 14px;
}
h5 {
font-size: 12px;
}
h6 {
font-size: 11px;
}
blockquote {
margin: 0;
}
ul,
ol {
padding: 0;
margin-top: 0;
margin-bottom: 0;
}
ol ol,
ul ol {
list-style-type: lower-roman;
}
ul ul ol,
ul ol ol,
ol ul ol,
ol ol ol {
list-style-type: lower-alpha;
}
dd {
margin-left: 0;
}
code {
font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 12px;
}
pre {
margin-top: 0;
margin-bottom: 0;
font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
.select::-ms-expand {
opacity: 0;
}
.octicon {
font: normal normal normal 16px/1 octicons-link;
display: inline-block;
text-decoration: none;
text-rendering: auto;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.octicon-link:before {
content: '\f05c';
}
.markdown-body:before {
display: table;
content: "";
}
.markdown-body:after {
display: table;
clear: both;
content: "";
}
.markdown-body>*:first-child {
margin-top: 0 !important;
}
.markdown-body>*:last-child {
margin-bottom: 0 !important;
}
a:not([href]) {
color: inherit;
text-decoration: none;
}
.anchor {
display: inline-block;
padding-right: 2px;
margin-left: -18px;
}
.anchor:focus {
outline: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1em;
margin-bottom: 16px;
font-weight: bold;
line-height: 1.4;
}
h1 .octicon-link,
h2 .octicon-link,
h3 .octicon-link,
h4 .octicon-link,
h5 .octicon-link,
h6 .octicon-link {
color: #000;
vertical-align: middle;
visibility: hidden;
}
h1:hover .anchor,
h2:hover .anchor,
h3:hover .anchor,
h4:hover .anchor,
h5:hover .anchor,
h6:hover .anchor {
text-decoration: none;
}
h1:hover .anchor .octicon-link,
h2:hover .anchor .octicon-link,
h3:hover .anchor .octicon-link,
h4:hover .anchor .octicon-link,
h5:hover .anchor .octicon-link,
h6:hover .anchor .octicon-link {
visibility: visible;
}
h1 {
padding-bottom: 0.3em;
font-size: 2.25em;
line-height: 1.2;
border-bottom: 1px solid #eee;
}
h1 .anchor {
line-height: 1;
}
h2 {
padding-bottom: 0.3em;
font-size: 1.75em;
line-height: 1.225;
border-bottom: 1px solid #eee;
}
h2 .anchor {
line-height: 1;
}
h3 {
font-size: 1.5em;
line-height: 1.43;
}
h3 .anchor {
line-height: 1.2;
}
h4 {
font-size: 1.25em;
}
h4 .anchor {
line-height: 1.2;
}
h5 {
font-size: 1em;
}
h5 .anchor {
line-height: 1.1;
}
h6 {
font-size: 1em;
color: #777;
}
h6 .anchor {
line-height: 1.1;
}
p,
blockquote,
ul,
ol,
dl,
table,
pre {
margin-top: 0;
margin-bottom: 16px;
}
hr {
height: 4px;
padding: 0;
margin: 16px 0;
background-color: #e7e7e7;
border: 0 none;
}
ul,
ol {
padding-left: 2em;
}
ul ul,
ul ol,
ol ol,
ol ul {
margin-top: 0;
margin-bottom: 0;
}
li>p {
margin-top: 16px;
}
dl {
padding: 0;
}
dl dt {
padding: 0;
margin-top: 16px;
font-size: 1em;
font-style: italic;
font-weight: bold;
}
dl dd {
padding: 0 16px;
margin-bottom: 16px;
}
blockquote {
padding: 0 15px;
color: #777;
border-left: 4px solid #ddd;
}
blockquote>:first-child {
margin-top: 0;
}
blockquote>:last-child {
margin-bottom: 0;
}
table {
display: block;
width: 100%;
overflow: auto;
word-break: normal;
word-break: keep-all;
}
table th {
font-weight: bold;
}
table th,
table td {
padding: 6px 13px;
border: 1px solid #ddd;
}
table tr {
background-color: #fff;
border-top: 1px solid #ccc;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
img {
max-width: 100%;
box-sizing: content-box;
background-color: #fff;
}
code {
padding: 0;
padding-top: 0.2em;
padding-bottom: 0.2em;
margin: 0;
font-size: 85%;
background-color: rgba(0,0,0,0.04);
border-radius: 3px;
}
code:before,
code:after {
letter-spacing: -0.2em;
content: "\00a0";
}
pre>code {
padding: 0;
margin: 0;
font-size: 100%;
word-break: normal;
white-space: pre;
background: transparent;
border: 0;
}
.highlight {
margin-bottom: 16px;
}
.highlight pre,
pre {
padding: 16px;
overflow: auto;
font-size: 85%;
line-height: 1.45;
background-color: #f7f7f7;
border-radius: 3px;
}
.highlight pre {
margin-bottom: 0;
word-break: normal;
}
pre {
word-wrap: normal;
}
pre code {
display: inline;
max-width: initial;
padding: 0;
margin: 0;
overflow: initial;
line-height: inherit;
word-wrap: normal;
background-color: transparent;
border: 0;
}
pre code:before,
pre code:after {
content: normal;
}
kbd {
display: inline-block;
padding: 3px 5px;
font-size: 11px;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.pl-c {
color: #969896;
}
.pl-c1,
.pl-s .pl-v {
color: #0086b3;
}
.pl-e,
.pl-en {
color: #795da3;
}
.pl-s .pl-s1,
.pl-smi {
color: #333;
}
.pl-ent {
color: #63a35c;
}
.pl-k {
color: #a71d5d;
}
.pl-pds,
.pl-s,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sra,
.pl-sr .pl-sre {
color: #183691;
}
.pl-v {
color: #ed6a43;
}
.pl-id {
color: #b52a1d;
}
.pl-ii {
background-color: #b52a1d;
color: #f8f8f8;
}
.pl-sr .pl-cce {
color: #63a35c;
font-weight: bold;
}
.pl-ml {
color: #693a17;
}
.pl-mh,
.pl-mh .pl-en,
.pl-ms {
color: #1d3e81;
font-weight: bold;
}
.pl-mq {
color: #008080;
}
.pl-mi {
color: #333;
font-style: italic;
}
.pl-mb {
color: #333;
font-weight: bold;
}
.pl-md {
background-color: #ffecec;
color: #bd2c00;
}
.pl-mi1 {
background-color: #eaffea;
color: #55a532;
}
.pl-mdr {
color: #795da3;
font-weight: bold;
}
.pl-mo {
color: #1d3e81;
}
kbd {
display: inline-block;
padding: 3px 5px;
font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.task-list-item {
list-style-type: none;
}
.task-list-item+.task-list-item {
margin-top: 3px;
}
.task-list-item input {
margin: 0 0.35em 0.25em -1.6em;
vertical-align: middle;
}
:checked+.radio-label {
z-index: 1;
position: relative;
border-color: #4078c0;
}
.sourceLine {
display: inline-block;
}
code .kw { color: #000000; }
code .dt { color: #ed6a43; }
code .dv { color: #009999; }
code .bn { color: #009999; }
code .fl { color: #009999; }
code .ch { color: #009999; }
code .st { color: #183691; }
code .co { color: #969896; }
code .ot { color: #0086b3; }
code .al { color: #a61717; }
code .fu { color: #63a35c; }
code .er { color: #a61717; background-color: #e3d2d2; }
code .wa { color: #000000; }
code .cn { color: #008080; }
code .sc { color: #008080; }
code .vs { color: #183691; }
code .ss { color: #183691; }
code .im { color: #000000; }
code .va {color: #008080; }
code .cf { color: #000000; }
code .op { color: #000000; }
code .bu { color: #000000; }
code .ex { color: #000000; }
code .pp { color: #999999; }
code .at { color: #008080; }
code .do { color: #969896; }
code .an { color: #008080; }
code .cv { color: #008080; }
code .in { color: #008080; }
</style>
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>

</head>

<body>

<h1 id="combine-component-models-to-estimate-years-of-life-lost">Combine component models to estimate Years of Life Lost</h1>
<p>David McAllister 17 December, 2020</p>
<h1 id="years-of-life-lost-for-women-assuming-age-and-comorbidity-are-independent-the-correlation-between-comorbidities-was-estimated-assuming-that-the-association-between-comorbidities-was-independent">Years of Life Lost for women assuming age and comorbidity are independent. The correlation between comorbidities was estimated assuming that the association between comorbidities was independent.</h1>
<p>This document combines the comorbidity, age and survival model outputs to estimate years of life lost. It can be rendered for men and women, and assuming that age and comorbidity are associated or independent. This particular report is for women and assumes that age and comorbidity are independent.</p>
<p>It also allows for sensitivity analyses on the correlation between comorbidities. This analysis is</p>
<p>one where comorbidities are assumed independent .</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<h1 id="functions">Functions</h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>SurvGomp <span class="ot">&lt;-</span> <span class="cf">function</span>(t, start, ...) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is a modified version of the summary function (survival part)</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># from flexsurv::summary.flexsurvreg, only difference is triple colon as </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># workhorse function undereath (written in c++) is hidden from users</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  ret <span class="ot">&lt;-</span> (<span class="dv">1</span> <span class="sc">-</span> flexsurv<span class="sc">:::</span><span class="fu">pgompertz_work</span>(t, ...))<span class="sc">/</span>(<span class="dv">1</span><span class="sc">-</span>flexsurv<span class="sc">:::</span><span class="fu">pgompertz_work</span>(start, ...))</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  ret[t<span class="sc">&lt;</span>start] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  ret</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a> <span class="co"># example of this function</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">SurvGomp</span>(<span class="at">t =</span> <span class="dv">41</span><span class="sc">:</span><span class="dv">130</span>, <span class="at">start =</span> <span class="dv">50</span>, <span class="at">shape =</span> <span class="fl">0.10345</span>, <span class="at">rate =</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">11.0345</span>),</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">lower_tail =</span> <span class="cn">TRUE</span>, <span class="at">give_log =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<h1 id="inputs-to-synthesis">Inputs to synthesis</h1>
<p>Read in simulated patients from comorbidity model, age-sex distribution from the Istituto Superiore di Sanità (ISS report), the WHO global burden of disease life tables and the age distributions from the age models.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>correlation_como <span class="sc">==</span> <span class="st">&quot;converged&quot;</span>)   italy <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/SimulatedProfilesConverged.Rds&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>correlation_como <span class="sc">==</span> <span class="st">&quot;unconverged&quot;</span>) italy <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/SimulatedProfilesUnconverged.Rds&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>correlation_como <span class="sc">==</span> <span class="st">&quot;maximal&quot;</span>) italy <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/highest_cor_como.Rds&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>correlation_como <span class="sc">==</span> <span class="st">&quot;independent&quot;</span>) italy <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/independent_como.Rds&quot;</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(italy) <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(<span class="fu">names</span>(italy))</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>italy <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(italy)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>age_sex <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;Data/age_distribution_italian_deaths.txt&quot;</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;men&quot;</span>) {</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  my_vcov <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/male_vcov.csv&quot;</span>)[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  my_coef <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/male_coef.csv&quot;</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(params<span class="sc">$</span>correlation <span class="sc">==</span> <span class="st">&quot;associated&quot;</span>) {</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(params<span class="sc">$</span>sd_como_age <span class="sc">==</span> <span class="st">&quot;low&quot;</span>) {age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_male_0_5.Rds&quot;</span>)}</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(params<span class="sc">$</span>sd_como_age <span class="sc">==</span> <span class="st">&quot;high&quot;</span>){age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_male_1.Rds&quot;</span>)}</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(params<span class="sc">$</span>correlation <span class="sc">==</span> <span class="st">&quot;independent&quot;</span>) age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_no_comorbid_male.Rds&quot;</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  who <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/who_compare_men.csv&quot;</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;women&quot;</span>) {</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  my_vcov <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/female_vcov.csv&quot;</span>)[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  my_coef <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/female_coef.csv&quot;</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(params<span class="sc">$</span>correlation <span class="sc">==</span> <span class="st">&quot;associated&quot;</span>) {</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(params<span class="sc">$</span>sd_como_age <span class="sc">==</span> <span class="st">&quot;low&quot;</span>) {age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_female_0_5.Rds&quot;</span>)}</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(params<span class="sc">$</span>sd_como_age <span class="sc">==</span> <span class="st">&quot;high&quot;</span>){age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_female_1.Rds&quot;</span>)}</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(params<span class="sc">$</span>correlation <span class="sc">==</span> <span class="st">&quot;independent&quot;</span>) age_smpls <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Data/age_selection_no_comorbid_female.Rds&quot;</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  who <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/sail_outputs/who_compare_women.csv&quot;</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>my_vcov <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(my_vcov)</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(my_vcov) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(my_vcov)</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>my_coef_vect <span class="ot">&lt;-</span> my_coef[,<span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">TRUE</span>]</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(my_coef_vect) <span class="ot">&lt;-</span> my_coef[,<span class="dv">1</span>, drop <span class="ot">=</span> <span class="cn">TRUE</span>]</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>my_coef <span class="ot">&lt;-</span> my_coef_vect</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(my_coef_vect)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>who_reference <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;Data/who_mortality_table.txt&quot;</span>)</span></code></pre></div>
<h1 id="who-life-tables-based-yll">WHO life tables based YLL</h1>
<p>The following uses the proportions in each age who died and the WHO GBD 2010 life tables to estimate the YLL.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>age_sex <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>age_point) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(sex, n) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">age_bands</th>
<th align="right">men</th>
<th align="right">women</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">30-39</td>
<td align="right">14</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">40-49</td>
<td align="right">49</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">50-59</td>
<td align="right">190</td>
<td align="right">53</td>
</tr>
<tr class="even">
<td align="left">60-69</td>
<td align="right">607</td>
<td align="right">154</td>
</tr>
<tr class="odd">
<td align="left">70-79</td>
<td align="right">1847</td>
<td align="right">556</td>
</tr>
<tr class="even">
<td align="left">80-89</td>
<td align="right">1808</td>
<td align="right">894</td>
</tr>
<tr class="odd">
<td align="left">90+</td>
<td align="right">274</td>
<td align="right">334</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>age_sex_whole <span class="ot">&lt;-</span> age_sex <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(sex <span class="sc">==</span> params<span class="sc">$</span>sex) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">prp =</span> n<span class="sc">/</span><span class="fu">sum</span>(n), </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">age_mean =</span> prp<span class="sc">*</span>age_point)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>age_sex_restr <span class="ot">&lt;-</span> age_sex <span class="sc">%&gt;%</span> </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(sex <span class="sc">==</span> params<span class="sc">$</span>sex, age_point <span class="sc">&gt;=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">prp =</span> n<span class="sc">/</span><span class="fu">sum</span>(n), </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">age_mean =</span> prp<span class="sc">*</span>age_point)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Mean age</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>mean_age_whole <span class="ot">&lt;-</span> age_sex_whole <span class="sc">%&gt;%</span> </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(age_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">1</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>mean_age_restricted <span class="ot">&lt;-</span> age_sex_restr <span class="sc">%&gt;%</span> </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(age_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">1</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="do">## estimate yll using WHO life expectancy and age distribution alone ----</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>who_reference <span class="ot">&lt;-</span> who_reference <span class="sc">%&gt;%</span> </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(map2italy) <span class="sc">%&gt;%</span> </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">expected_remain =</span> <span class="fu">mean</span>(expected_remain)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>yll_mean_who_whole <span class="ot">&lt;-</span> who_reference <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(age_sex_whole <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">map2italy =</span> age_point, prp)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">res =</span> expected_remain <span class="sc">*</span> prp) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(res) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Joining, by = &quot;map2italy&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>yll_mean_who_restricted <span class="ot">&lt;-</span> who_reference <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(age_sex_restr <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">map2italy =</span> age_point, prp)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">res =</span> expected_remain <span class="sc">*</span> prp) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(res) <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Joining, by = &quot;map2italy&quot;</code></pre>
<p>The mean age for the ISS deaths was 81.1 overall and 81.5 when people who died aged &lt;50 were excluded from the calculation.</p>
<p>The estimated years of life lost obtained by applying the age distributions from the ISS report to these tables was 12.2 per person using the whole cohort and 11.8 after excluding those aged under 50.</p>
<h1 id="combining-samples-from-survival-models-age-models-and-comorbidity-models">Combining samples from survival models, age models and comorbidity models</h1>
<p>The following combines 10,000 samples from survival models, age models and comorbidity models to estimate the age, sex and comorbidity specific life expectancy and subsequently years of life lost.</p>
<h2 id="age-distributions">Age distributions</h2>
<p>The following shows the modelled age-distribution of the ISS data (based on the published counts of patients in each age band). The grey bars are for the simulated data and the coloured bars are the original data (assuming a uniform distribution within each age-band).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Sum conditions to Calculate comorbidity count</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>italy_count <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(italy)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>age_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">comorbidity_count =</span> italy_count, <span class="at">age =</span> age_smpls)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="do">## spread ages along range of possible values to allow comparison</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>iss <span class="ot">&lt;-</span> age_sex <span class="sc">%&gt;%</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> params<span class="sc">$</span>sex) <span class="sc">%&gt;%</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age_bands, age_point, n) <span class="sc">%&gt;%</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(age_bands) <span class="sc">%&gt;%</span> </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>iss<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">map</span>(iss<span class="sc">$</span>data, <span class="sc">~</span> <span class="fu">rep</span>(.x<span class="sc">$</span>age_point, .x<span class="sc">$</span>n))</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>iss<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">map</span>(iss<span class="sc">$</span>age, <span class="sc">~</span> .x <span class="sc">+</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">4</span>, <span class="at">length.out =</span> <span class="fu">length</span>(.x)))</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>iss <span class="ot">&lt;-</span> iss <span class="sc">%&gt;%</span> </span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(age)) </span></code></pre></div>
<pre><code>## Adding missing grouping variables: `age_bands`</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>plot_ages1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(age_tibble, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">data =</span> iss, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> age_bands), <span class="at">alpha =</span> <span class="fl">0.9</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>plot_ages1</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.

## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Here the above histogram is broken down by the comorbidity count.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>plot_ages2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(age_tibble, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">factor</span>(comorbidity_count, <span class="at">ordered =</span> <span class="cn">TRUE</span>))) </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>plot_ages2</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<h2 id="comorbidity-counts">Comorbidity counts</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>como_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">`</span><span class="at">Comorbidity count</span><span class="st">`</span> <span class="ot">=</span> italy_count) <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Comorbidity count</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">N =</span> <span class="fu">length</span>(<span class="st">`</span><span class="at">Comorbidity count</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Percentage =</span> <span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span> N <span class="sc">/</span><span class="fu">sum</span>(N),<span class="dv">2</span>))</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(como_tbl)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Comorbidity count</th>
<th align="right">N</th>
<th align="right">Percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">312</td>
<td align="right">3.12</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">1670</td>
<td align="right">16.70</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">3065</td>
<td align="right">30.65</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">2722</td>
<td align="right">27.22</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">1512</td>
<td align="right">15.12</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">558</td>
<td align="right">5.58</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">138</td>
<td align="right">1.38</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">20</td>
<td align="right">0.20</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">3</td>
<td align="right">0.03</td>
</tr>
</tbody>
</table>
<p>Here the above histogram is shown as small multiples having stratified by comorbidity count.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>plot_ages3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(age_tibble, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> comorbidity_count) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="st">&quot;Age (years)&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Number of simulated patients (of 20,000)&quot;</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>plot_ages3</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The following is a check that the names of the comorbidities are the same in the samples from the survival models and comorbidity estimates. The comorbidity samples should have no differences (character 0) and the coefficients and variance-covariance matrix from the survival model shoudl be identical apart from the shape and rate parameters.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>name_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;atr_fib&quot;</span>, <span class="st">&quot;cancer&quot;</span>, <span class="st">&quot;copd&quot;</span>, <span class="st">&quot;demen&quot;</span>, <span class="st">&quot;diab&quot;</span>, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;h_fail&quot;</span>, <span class="st">&quot;hypert&quot;</span>, <span class="st">&quot;ihd&quot;</span>, <span class="st">&quot;renal&quot;</span>, <span class="st">&quot;liver&quot;</span>, <span class="st">&quot;stroke&quot;</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>name_cols_age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;atr_fib:age&quot;</span>, </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;cancer:age&quot;</span>, <span class="st">&quot;copd:age&quot;</span>, <span class="st">&quot;demen:age&quot;</span>, <span class="st">&quot;diab:age&quot;</span>, <span class="st">&quot;h_fail:age&quot;</span>, </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;hypert:age&quot;</span>, <span class="st">&quot;ihd:age&quot;</span>, <span class="st">&quot;renal:age&quot;</span>, <span class="st">&quot;liver:age&quot;</span>, <span class="st">&quot;stroke:age&quot;</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">colnames</span>(italy), name_cols)</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">names</span>(my_coef), <span class="fu">c</span>(name_cols, name_cols_age))</span></code></pre></div>
<pre><code>## [1] &quot;shape&quot; &quot;rate&quot;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="fu">colnames</span>(my_vcov), <span class="fu">c</span>(name_cols, name_cols_age))</span></code></pre></div>
<pre><code>## [1] &quot;shape&quot; &quot;rate&quot;</code></pre>
<h2 id="design-matrix">Design matrix</h2>
<p>The following code multiplies the comorbidity samples, which is a prediction matrix by age to get age:comorbidity interactions</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>italy_ages <span class="ot">&lt;-</span> age_smpls <span class="sc">*</span> italy</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(italy_ages)</span></code></pre></div>
<pre><code>##      atr_fib  cancer copd   demen    diab  h_fail  hypert     ihd renal   liver stroke
## [1,] 72.7021  0.0000    0  0.0000 72.7021  0.0000 72.7021 72.7021     0 72.7021      0
## [2,]  0.0000  0.0000    0  0.0000 86.4479  0.0000 86.4479  0.0000     0  0.0000      0
## [3,]  0.0000 68.0758    0 68.0758 68.0758 68.0758 68.0758  0.0000     0  0.0000      0
## [4,]  0.0000  0.0000    0  0.0000  0.0000  0.0000 86.0029 86.0029     0  0.0000      0
## [5,]  0.0000  0.0000    0  0.0000  0.0000  0.0000 75.2458 75.2458     0  0.0000      0
## [6,]  0.0000  0.0000    0  0.0000 73.7530  0.0000 73.7530 73.7530     0  0.0000      0</code></pre>
<h2 id="sampling-from-survival-model">Sampling from survival model</h2>
<p>THe following code samples from the survival model to obtain 10,000 samples of the coefficients.</p>
<p>Check data are correctly aligned then obtain 10,000 samples.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">names</span>(my_coef) <span class="sc">==</span> <span class="fu">colnames</span>(my_vcov))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>surv_smpls <span class="ot">&lt;-</span> mvtnorm<span class="sc">::</span><span class="fu">rmvnorm</span>(<span class="dv">10000</span>, my_coef, my_vcov)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> (<span class="fu">colMeans</span>(surv_smpls) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">3</span>))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">apply</span>(surv_smpls, <span class="dv">2</span>, sd) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">3</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">tibble</span>(<span class="st">&quot;_&quot;</span> <span class="ot">=</span> <span class="fu">names</span>(a), <span class="st">&quot;est&quot;</span> <span class="ot">=</span> a, <span class="at">se =</span> b))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">_</th>
<th align="right">est</th>
<th align="right">se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">shape</td>
<td align="right">0.109</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">rate</td>
<td align="right">-12.263</td>
<td align="right">0.049</td>
</tr>
<tr class="odd">
<td align="left">atr_fib</td>
<td align="right">-0.106</td>
<td align="right">0.107</td>
</tr>
<tr class="even">
<td align="left">cancer</td>
<td align="right">2.344</td>
<td align="right">0.073</td>
</tr>
<tr class="odd">
<td align="left">copd</td>
<td align="right">2.733</td>
<td align="right">0.078</td>
</tr>
<tr class="even">
<td align="left">demen</td>
<td align="right">2.720</td>
<td align="right">0.123</td>
</tr>
<tr class="odd">
<td align="left">diab</td>
<td align="right">0.781</td>
<td align="right">0.073</td>
</tr>
<tr class="even">
<td align="left">h_fail</td>
<td align="right">1.292</td>
<td align="right">0.115</td>
</tr>
<tr class="odd">
<td align="left">hypert</td>
<td align="right">-0.412</td>
<td align="right">0.064</td>
</tr>
<tr class="even">
<td align="left">ihd</td>
<td align="right">0.864</td>
<td align="right">0.135</td>
</tr>
<tr class="odd">
<td align="left">renal</td>
<td align="right">0.363</td>
<td align="right">0.080</td>
</tr>
<tr class="even">
<td align="left">liver</td>
<td align="right">2.612</td>
<td align="right">0.193</td>
</tr>
<tr class="odd">
<td align="left">stroke</td>
<td align="right">0.703</td>
<td align="right">0.098</td>
</tr>
<tr class="even">
<td align="left">atr_fib:age</td>
<td align="right">0.005</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">cancer:age</td>
<td align="right">-0.026</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">copd:age</td>
<td align="right">-0.027</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">demen:age</td>
<td align="right">-0.022</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">diab:age</td>
<td align="right">-0.007</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">h_fail:age</td>
<td align="right">-0.011</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">hypert:age</td>
<td align="right">0.006</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">ihd:age</td>
<td align="right">-0.009</td>
<td align="right">0.002</td>
</tr>
<tr class="even">
<td align="left">renal:age</td>
<td align="right">-0.003</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">liver:age</td>
<td align="right">-0.028</td>
<td align="right">0.003</td>
</tr>
<tr class="even">
<td align="left">stroke:age</td>
<td align="right">-0.005</td>
<td align="right">0.001</td>
</tr>
</tbody>
</table>
<h2 id="estimating-the-linear-predictor-for-each-of-the-10000-iterations">Estimating the linear predictor for each of the 10,000 iterations</h2>
<p>Note that these multiplications are not matrix multiplications. They are element-wise multiplications of identically positioned elements in each matrix. Each part of the linear predictor is calculated separately, these are then summed to obtain the linear predictor based on the age and comorbidity distributions of the simulated patients.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="do">## shape parameter</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>shpe       <span class="ot">&lt;-</span> surv_smpls[ , <span class="st">&quot;shape&quot;</span>]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Intercept (rate parameter)</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>cept_lp    <span class="ot">&lt;-</span> surv_smpls[ , <span class="st">&quot;rate&quot;</span>]</span></code></pre></div>
<p>The following shows the linear predictor for covariates without interactions by age. These are mostly positive, reflecting the fact that almost all of the comorbidites are associated with increased hazard rates for death.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">## This multiplies the covariate level (binary) with the simulated coefficeints</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>non_age_lp <span class="ot">&lt;-</span> italy[,name_cols] <span class="sc">*</span> (surv_smpls[, name_cols])</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="do">## This adds these together to get the non-age dependent part of the linear predictor</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>non_age_lp <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(non_age_lp)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(non_age_lp, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The following shows the linear predictor for covariates with interactions by age. All are negative, reflecting the fact that there is attenuation in the hazard ratios for the comorbid diseases with increasing age, as is common in chronic disease epidemiology.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Part of lp dependent on age</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure_matrices_match</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">paste0</span>(name_cols, <span class="st">&quot;:age&quot;</span>) <span class="sc">==</span> name_cols_age )</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Loop through the different age groups to get the part of the LP with age interactions</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>ages_lp <span class="ot">&lt;-</span>  <span class="fu">rowSums</span>(italy_ages[, name_cols]  <span class="sc">*</span> surv_smpls[, name_cols_age])</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(ages_lp, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The following sums the components of the linear predictor.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="do">## total lp</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>tot_lp <span class="ot">&lt;-</span> cept_lp <span class="sc">+</span> non_age_lp <span class="sc">+</span> ages_lp</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(tot_lp, <span class="at">breaks =</span> <span class="dv">50</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">12</span>, <span class="sc">-</span><span class="dv">5</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The following transforms the linear predictor onto the rate scale.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>tot_rat <span class="ot">&lt;-</span> <span class="fu">exp</span>(tot_lp)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="dv">10000</span><span class="sc">*</span>tot_rat, <span class="at">breaks =</span> <span class="dv">500</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>), <span class="at">xlab =</span> <span class="st">&quot;Rate per 10,000 person-years&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<h2 id="estimate-the-survival-at-each-time-point-3-monthly">Estimate the survival at each time-point (3-monthly)</h2>
<p>The following uses a function from the flexsurv package called by summary.flexsurv to obtain survival probabilities at each follow-up time. Where the time is before the patients age at baseline (in this case the age at death in the ISS data) the survival probability is by definition one.</p>
<p>In this function all notional patients have the same shape parameter, but have patient-specific rate parameters. This function is not vectorised with respect to the rate and shape parameters, but it is nonetheless very fast.</p>
<p>For one simulated patient in the “low” SD age group the rate and age variables are such that the function returns a missing value, this is the only sample that does so. Presumably there is a numerical reason in the internals of the function. Give a warning and drop from the summary function at the end. Return an error if there is more than one missing. Only occured in most recent set of simulated patients which is a fresh simulation.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>times_vect <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">50</span>, <span class="dv">150</span>, <span class="fl">0.25</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>tot_surv <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, <span class="at">nrow =</span> <span class="dv">10000</span>, <span class="at">ncol =</span> <span class="fu">length</span>(times_vect))</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>){</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="fu">SurvGomp</span>(<span class="at">t =</span> times_vect, <span class="at">start =</span> age_smpls[i], <span class="at">shape =</span> shpe[i], <span class="at">rate =</span> tot_rat[i],</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">lower_tail =</span> <span class="cn">TRUE</span>, <span class="at">give_log =</span> <span class="cn">FALSE</span>)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  tot_surv[i,] <span class="ot">&lt;-</span> <span class="fu">t</span>(a)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>tot_surv_na <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">is.na</span>(tot_surv), <span class="at">nrow =</span> <span class="dv">10000</span>, <span class="at">ncol =</span> <span class="fu">length</span>(times_vect))</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>tot_surv_na <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(tot_surv_na)</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>tot_surv_na <span class="ot">&lt;-</span> <span class="fu">any</span>(tot_surv_na <span class="sc">&gt;=</span><span class="dv">1</span>)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>tot_surv_na <span class="ot">&lt;-</span> <span class="fu">sum</span>(tot_surv_na)</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(tot_surv_na <span class="sc">&gt;=</span><span class="dv">1</span>) <span class="fu">warning</span>(<span class="fu">paste0</span>(<span class="st">&quot;The SurvGomp function returned NaN for &quot;</span>, tot_surv_na, <span class="st">&quot; simulated patients&quot;</span>))</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(tot_surv_na <span class="sc">&gt;=</span><span class="dv">5</span>) <span class="fu">stop</span>()</span></code></pre></div>
<h3 id="the-following-plots-show-the-survival-distribution-for-a-random-sample-of-3-notional-patients">The following plots show the survival distribution for a random sample of 3 notional patients.</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>, <span class="dv">1</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(times_vect, tot_surv[i,], <span class="at">xlab =</span> <span class="st">&quot;age&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;survival&quot;</span>, <span class="at">main =</span> <span class="fu">paste0</span>(<span class="st">&quot;Age &quot;</span>, age_smpls[i] <span class="sc">%&gt;%</span>  <span class="fu">round</span>(), <span class="st">&quot; years&quot;</span>))</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
<h2 id="survival-distribution-for-all-patients-stratified-by-age-and-comorbidity-count">Survival distribution for all patients stratified by age and comorbidity count</h2>
<p>The following figures show this for all patients according to age, and comorbidity.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tot_surv)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(surv_all) <span class="ot">&lt;-</span> times_vect</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span> surv_all[ , times_vect <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">50</span>, <span class="dv">120</span>, <span class="fl">2.5</span>)]</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span> surv_all <span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pt =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span>  surv_all <span class="sc">%&gt;%</span> </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">comorbidity_count =</span> italy_count,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">age =</span> age_smpls) <span class="sc">%&gt;%</span> </span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="st">&quot;times&quot;</span>, <span class="st">&quot;survival&quot;</span>, <span class="sc">-</span>pt, <span class="sc">-</span>comorbidity_count, <span class="sc">-</span>age) <span class="sc">%&gt;%</span> </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">times =</span> <span class="fu">as.integer</span>(times),</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">comorbidity_count =</span> <span class="fu">factor</span>(comorbidity_count, <span class="at">ordered =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pt, times)</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>surv_all <span class="ot">&lt;-</span> surv_all <span class="sc">%&gt;%</span> </span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;=</span> times, times <span class="sc">&lt;=</span> <span class="dv">120</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_bands =</span> Hmisc<span class="sc">::</span><span class="fu">cut2</span>(age, <span class="at">cuts =</span> <span class="fu">seq</span>(<span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">10</span>))) </span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>plot_surv <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(surv_all, <span class="fu">aes</span>(<span class="at">x =</span> times, <span class="at">y =</span> survival, <span class="at">colour =</span> comorbidity_count, <span class="at">group =</span> pt)) <span class="sc">+</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> age_bands)</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>plot_surv</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<h2 id="calculate-life-expectancy-mean-survival-for-each-patient">Calculate life expectancy (mean survival) for each patient</h2>
<p>The following sums over the distribution of survival on time to obtain the mean survival, which is the life expectancy.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>le <span class="ot">&lt;-</span> <span class="fu">apply</span>(tot_surv, <span class="dv">1</span>, <span class="cf">function</span>(x) {</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span>x</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># calculate proportion who died in the interval</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> x <span class="sc">-</span> <span class="fu">lag</span>(x, <span class="at">default =</span> <span class="dv">0</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the expectation of death</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(x <span class="sc">*</span> times_vect)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>le_check <span class="ot">&lt;-</span> <span class="fu">apply</span>(tot_surv, <span class="dv">1</span>, <span class="cf">function</span>(x) {</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span>x</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># calculate proportion who died in the interval</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> x <span class="sc">-</span> <span class="fu">lag</span>(x, <span class="at">default =</span> <span class="dv">0</span>)</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate the expectation of death</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(x)</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(le_check <span class="sc">==</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(le,  <span class="fu">paste0</span>(<span class="st">&quot;Data/&quot;</span>, params<span class="sc">$</span>sex, <span class="st">&quot;_&quot;</span>, params<span class="sc">$</span>correlation, <span class="st">&quot;_&quot;</span>, params<span class="sc">$</span>correlation_como, <span class="st">&quot;_le_pre_offset.Rds&quot;</span>))</span></code></pre></div>
<h2 id="offset-life-expectancy-to-allow-for-the-fact-that-the-le-in-wales-is-lower-than-the-who-levels">Offset life expectancy to allow for the fact that the LE in Wales is lower than the WHO levels</h2>
<p>The following corrects for the fact that the intercept-only life expectancy from the models in Wales are slightly lower than those in the WHO GBD life-expectancy tables. The Wales life expectancies are multiplied by between 1.07 and 1.02 depending on the age.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>who <span class="ot">&lt;-</span> who <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">who_ratio =</span> who_remain<span class="sc">/</span>expect_remain_years,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">who_le_ratio =</span> (who_remain<span class="sc">+</span>age)<span class="sc">/</span>(expect_remain_years <span class="sc">+</span> age))</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(who<span class="sc">$</span>who_le_ratio)</span></code></pre></div>
<pre><code>## [1] 1.026913</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;men&quot;</span>){</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  who_offset <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">55</span> <span class="sc">~</span> <span class="fl">1.07</span>,</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">65</span> <span class="sc">~</span> <span class="fl">1.06</span>,</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">75</span> <span class="sc">~</span> <span class="fl">1.04</span>,</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">85</span> <span class="sc">~</span> <span class="fl">1.02</span>,</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(params<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;women&quot;</span>){</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  who_offset <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">55</span> <span class="sc">~</span> <span class="fl">1.04</span>,</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">65</span> <span class="sc">~</span> <span class="fl">1.03</span>,</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">75</span> <span class="sc">~</span> <span class="fl">1.02</span>,</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>  age_smpls <span class="sc">&lt;=</span> <span class="dv">85</span> <span class="sc">~</span> <span class="fl">1.01</span>,</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>le <span class="ot">&lt;-</span> le <span class="sc">*</span> who_offset</span></code></pre></div>
<h2 id="years-of-life-lost">Years of life lost</h2>
<p>The following calculates the years of life lost from the age, sex and comorbidity defined survival and the age and comorbidities at death from the ISS data.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>yll <span class="ot">&lt;-</span> le <span class="sc">-</span> age_smpls</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(age_smpls, yll, <span class="at">xlab =</span> <span class="st">&quot;Age (years)&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Years of life lost&quot;</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(yll, <span class="at">breaks =</span> <span class="dv">50</span>, <span class="at">xlab =</span> <span class="st">&quot;Years of life lost&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Number of simulated patients&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<h2 id="compare-yll-using-who-tables-and-comorbidity-based-assesment">Compare YLL using WHO tables and comorbidity-based assesment</h2>
<p>Among those over 50 for which both methods were used, the WHO tables based estimates of YLL, and our estimates which additionally accomodate comorbidity, yielded similar per capita YLL; the values were 11.8 and 9.66 respectively.</p>
<h2 id="yll-by-age-and-comorbidity">YLL by age and comorbidity</h2>
<p>The following shows the distribution of YLL by age, sex and comorbidity by age categories.</p>
<h3 id="table-yll-per-capita-by-comorbidity-count-and-age">Table YLL per capita by comorbidity count, and age</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>yll_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">yll =</span> yll) <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">comorbidity_count =</span> <span class="fu">factor</span>(italy_count, <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">age =</span> <span class="fu">round</span>(age_smpls),</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">age_cat =</span> Hmisc<span class="sc">::</span><span class="fu">cut2</span>(age, <span class="at">cuts =</span> <span class="fu">seq</span>(<span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">10</span>)))</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>yll_smry <span class="ot">&lt;-</span> yll_df <span class="sc">%&gt;%</span> </span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(comorbidity_count, age_cat) <span class="sc">%&gt;%</span> </span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">yll =</span> <span class="fu">mean</span>(yll) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Comorbidity count</span><span class="st">`</span> <span class="ot">=</span> comorbidity_count) <span class="sc">%&gt;%</span> </span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(age_cat, yll)</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;comorbidity_count&#39; (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(yll_smry)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Comorbidity count</th>
<th align="right">[ 50, 60)</th>
<th align="right">[ 60, 70)</th>
<th align="right">[ 70, 80)</th>
<th align="right">[ 80,110]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">0</td>
<td align="right">35.02</td>
<td align="right">25.60</td>
<td align="right">17.05</td>
<td align="right">8.22</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">31.36</td>
<td align="right">23.51</td>
<td align="right">15.54</td>
<td align="right">7.48</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="right">28.68</td>
<td align="right">20.25</td>
<td align="right">13.33</td>
<td align="right">6.54</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="right">23.44</td>
<td align="right">16.70</td>
<td align="right">11.21</td>
<td align="right">5.69</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="right">17.49</td>
<td align="right">13.77</td>
<td align="right">9.15</td>
<td align="right">4.81</td>
</tr>
<tr class="even">
<td align="left">5</td>
<td align="right">14.44</td>
<td align="right">10.30</td>
<td align="right">7.41</td>
<td align="right">4.18</td>
</tr>
<tr class="odd">
<td align="left">6</td>
<td align="right">10.99</td>
<td align="right">9.48</td>
<td align="right">5.97</td>
<td align="right">3.16</td>
</tr>
<tr class="even">
<td align="left">7</td>
<td align="right">-</td>
<td align="right">6.25</td>
<td align="right">4.21</td>
<td align="right">2.46</td>
</tr>
<tr class="odd">
<td align="left">8</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">3.05</td>
<td align="right">-</td>
</tr>
</tbody>
</table>
<h2 id="plot-distribution-of-years-of-life-lost-by-age-and-comrobidity-count">Plot distribution of years of life lost by age and comrobidity count</h2>
<p>Plot distributions of YLL overall, then stratified by age, with colour indicating the comorbidity count.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>plot1_yll <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(yll_df, <span class="fu">aes</span>(<span class="at">x =</span> yll,  <span class="at">fill =</span> comorbidity_count)) <span class="sc">+</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>) <span class="sc">+</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;Number of simulated patients&quot;</span>) <span class="sc">+</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="st">&quot;Years of life lost&quot;</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>plot1_yll</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>plot2_yll <span class="ot">&lt;-</span> plot1_yll <span class="sc">+</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> age_cat) </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>plot2_yll</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAAHgCAMAAABNUi8GAAABZVBMVEUAAAAAADoAAGYAOpAAZrYZGT8ZGWIZP4EZYp8aGhohkIwnrYEsco4zMzM6AAA6ADo6AGY6OmY6OpA6kNs7Uos/GRk/GT8/GWI/P4E/gb1EAVRHLXtNTU1NTW5NTY5NbqtNjshdyGNiGRliGT9iGWJiP4Fin9lmAABmADpmAGZmOgBmOpBmkJBmtrZmtv9uTU1uTW5uTY5ubo5ubqtuq+SBPxmBPz+BP2KBYhmBgZ+Bn4GBvdmOTU2OTW6OTY6Obk2ObquOyP+QOgCQOjqQOmaQZgCQkDqQkGaQtpCQ27aQ29uQ2/+fYhmfYmKf2dmq3DKrbk2rbm6rjk2ryKur5OSr5P+2ZgC225C22/+2/9u2//+9gT+92dnIjk3I///Zn2LZvYHZ2Z/Z2b3Z2dnbkDrb/7bb///kq27k///r6+vy8vL95yX/tmb/yI7/25D/27b/29v/5Kv//7b//8j//9v//+T///8v5+P0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAe9ElEQVR4nO2diX/cxnmGVzJ9yJYo1XISH+tQSlLJ6UFZEZ021ZEsncZuqchMGrKpZFEH1yLtUkyXS+LvLwbAYAHszGCAD3MB7/uziV28i1183zyawQyOGUUQ5LFGrncAglQCoJDXAqCQ1wKgkNcCoJDXAqCQ12oH6P4ANLxQvRQAlWl4oXopACrT8EL1UgBUpuGF6qUAqEzDC9VLAVCZhheqlwKgMg0vVC8FQGUaXqheCoDKNLxQvZR/gD678Pa38eLJhQsX3nq0/+Jn6dtEL7+48Obd/Wzd8w+/VXwLXfZCLYWVikV/4cINu6F6KQ8BfSdZPLzB/r784sb+k3e4Fa979va3fN2Tj0zuhhVA81ALYS1c26F6KV8Bffnru2zx4heP9p//5FHqsDeFddlbU7IWaiUsrhc/v2s5VC/lK6Bx28aaONa4sZJK9PzDf2VtYb4urWRNyVqo1bAysZrTbqheyldAn//4LqtF42ZufwHojxJi83VmGz57oVbCSpW8tBuql/IV0EQPb1Rq0ORNvq4vgFbCyjzWYbIbqpfyHNDyMejfJ8WVr+sJoNWwUj1kwdkN1Uv5CiirQF7+y6OXX3xU7sXHdUq+rifHoNWwEqWdRLuheilfAWUjgYUxz7Rmid+89SgfMOxLL74cFg81beythuqlvAW0rD8KCqg346BluQvVS3kIaOHUEdfL3yx/rj9nkkpyGKqX8g9QXzS8UL0UAJVpeKF6KQAq0/BC9VLtAP0+U/5CII+8VpuFGWqrNHSHU/cCoFIjyFCHBOjZ9vjTnSia3xuvHeaLVI4yDEBJXt8AfTqJXq8dnm1PooNrUbbI5CjDAJTk9QzQ+YM9vpjd3ssWmecowwCU5PUM0NmdP7MmfnbnMJrf38kW8fpLseztHzRwKQC9NWF0xq08IzNbZJ6jKgA1KMnrXQ1arDoXNSiTowwDUJLXM0Dnv0uQxDGosd3yJg3GKSNI3YuP682z7Y20F7+BXnzHu+VNGgwzRpIC0Pm98U/3MA5qbre8SYNhxkjCmSSpEWSoADSRowwDUJIHQE1nGICSPABqOsMAlOQBUNMZBqAkD4CazjAAJXkA1HSGASjJA6CmMwxASR4ANZ1hAEryAKjpDANQkgdATWcYgJI8AGo6wwCU5AFQ0xkGoCQPgJrOMAAleQDUdIYBKMkDoKYzDEBJHgA1nWEASvIAqOkMA1CSB0BNZxiAkjwAajrDAJTkAVDTGQagJA+Ams4wACV5ANR0hgEoyRsQoBBkSahBpUaQoaIGTeQowwCU5AFQ0xkGoCQPgJrOMAAleQDUdIYBKMkDoKYzDEBJHgA1nWEASvIAqOkMA1CSB0BNZxiAkjwAajrDAJTkAVDTGQagJA+Ams4wACV5ANR0hgEoyQOgpjMMQEkeADWdYQBK8gCo6QwDUJIHQE1nGICSPABqOsMAlOQBUNMZBqAkD4CazjAAJXkA1HSGASjJA6CmMwxASR4ANZ1hAEryAKjpDANQkgdATWcYgJK8/gF6tj2Jovm98dphvkjlKMMAlOT1D9CD8SSB9OAaX2RylGEASvJ6B+jsV7+dRPMHe9Hs9l62yBxHGQagJK9vgJ796S9xtTm7cxjN7+9ki3j1pVjWdg8auhSAHmywdv31WkJmtsgsR1UAalCS17MaNK4zz0Q1KJOjDANQktczQA/GTBs4BjW2W96kwThlBNUOM51tb6S9+A304jveLW/SYJQwojAOKjWCDHVYgErlKMMAlOQBUNMZBqAkD4CazjAAJXkA1HSGASjJA6CmMwxASR4ANZ1hAEryAKjpDANQkgdATWcYgJI8AGo6wwCU5AFQ0xkGoCQPgJrOMAAleQDUdIYBKMkDoKYzDEBJHgA1nWEASvIAqOkMA1CSB0BNZxiAkjwAajrDAJTkAVDTGQagJA+Ams4wACV5ANR0hgEoyQOgpjMMQEkeADWdYQBK8gCo6QwDUJJnDNDjy1ul5dH5x+zl3/7a+JuWN2kHKAQVxMHkigEVrG3xRRFqUNSg33dXg3IB0IYeAFVbklI+3RyNVhbL48tfr45GV4/jP+uLlVf+MDr/35e/Go3eeJXwdXJzdO4r1sQnH95l209X5F+5lfxJP73OvvoqANX0wgy1Q0BPN1di3NaTJfv/eDVmcMpAnJ5/vFjJOIud5M3lrZObV+ONkmNQRh+rS08316VfyQFdTb8VNWgDL8xQOwS00OVJ+z2r64zF9cQRruTrpzmgjMbjK4+lX5kDmn8BANX1wgy1Q0DTI8l4GdduOT38T3klQzBmMX4zTdZf4YCy5r3Qwsu+srQEoHpemKH6Bujxlf9ZtPAAtMvNwgzVRBN/bqvUHqeAilYWm/6MttPNf1q08NKvBKAtvDBD7biTVPy/xGJ5ZbGTtMI7Sez4M27jRyvyr2RdqtPNczmg6SYAVMsLM1Sjw0wFQCsrv8rf5MNMW9Fusm51Xf6VERtY+ufPFkcPu0WcAajSCzPULgHtRIU+fCsBUKkRZKjeATqtjrw3FACVGkGG6hmgyQh80pAznWt87hOAAtDvzdagVAFQqRFkqAA0kaMMA1CSB0BNZxiAkrzwAT25uX5yc3S+flzAUYYBKMkLH9DdFXYhyrQ6VrosRxkGoCSvIaA/iEUlrqGKgMYVKDv/dFRfhTrKMAAleU0B/Vgkx4Cyk6MANDWCDLXXgJ5uXmWXmeyiiU+MIEPtNaBsxH8l2mVj/zVylGEASvLCB1RbjjIMQEle8IBmV+PhGDQ1ggwVgCZylGEASvICB3Q64so6SbNb4/Ekiub3xmuH+SKVowwDUJIXOKB5DZppfn8nmn2+c7Y9iQ6uRdkik6MMA1CS1y2gJzdHGt1psuSdpNcMx6eT+YO9aHZ7L1tknqMMA1CS1ymg7HEMGuccyaoOMzEtjkHjWnR257CwiNddimV+vyDnUgN68svH5Ns5dFQeqK/8izjb3oheryVkZovMcFQFoAYleZ3WoMfvv4pOPmtxiXxDyY9BWb9oI+4qVWtQJkcZBqAkr1NA2bMXbANaeMoT0+xW3IePcAxqbLe8SYMYDf9q0PIIaMpn0swnvfgN9OI73i1v0iBGw79j0JObo0In6WDMNME4qLHd8iYNYjTqevFX7ffiteUowwCU5PVsHFQlRxkGoCSvW0AtqQzodDRan+Jyu9QIMtR+A7r7xnfpXR91cpRhAEryggc0ueVjHVczZUaQoQLQRI4yDEBJXlNAvburM5qyJp7dN1cnRxkGoCQvfECjIzYMqvG8PEcZBqAkrymgn4iEe5IAqCkPgJrOMAAleWEDmj6XqXI9qEyOMgxASV7YgDaSowwDUJIXPKC4q7NkBBkqAE3kKMMAlOQFDujSbccKOcowACV5gQO6fMuHXI4yDEBJXteA2rheGZ0kANoW0COdZ3GTpb7tWCZHGQagJK9bQHfPfW27Bj3dvHq6ua7T0DvKMAAlecE38QzN3avpZN5qOcowACV5vQB0imfUcyPIUHsNKHv4d0ynxj0fjjIMQEle+ICyW0l3dab8dJRhAErywgcUghYKGVBHVQBqUJLXdQ1qRUu3HY9GGqeTHGUYgJK88AGdsv477knKjCBD7TWguJqpZAQZKgBN5CjDAJTkNQXUv7s62USIaOK5EWSovQaU35NUf72IowwPB1DWmHb+e00B/UAk3JMEQL8HoAsBUKnhMlQAygVApYbLUAEoFwCVGi5DLQG6RCsArRMxUwBU5TEeGQqlFV38HgDtIouDArTEIRMfDmcGWyaP5ASgTPpjTBEApX5/hlyUFztnsIhC6QQO7fdqLHEhewYoU3YuHvckJYbBUIVFz2vOQABld1jq3qZOEE51Sg1DobJSvhhLWPxSQEuQ+gAom2Xu+LKTuToBaGoYCJXDqQWovBb1AdAj9vyZXfNVKC63kxoGQq0CWguqv4AyWZ+rM30EOC5YTo2OQ+UlfFGkoikllX0L69X7Aii7hc24MMwkNToOVQhmFdKQANVpaukCoFKjm1AZcvkLLUkB5WOiCaQt9qXrXryFPjymQjQO6LuxkhecP7aiOaBMHFDliXpbgFriE1MhmgS0xCN/8W6m5jVptcP0iag6tQVo+jhZu714zDRXMtqHWuTQEKC5+BSFlDSIC9m/M0nBA8oS2NlXEkItwvlerHdFqm3uhYAKYR0KoMqpEOf3xmuH/E2bUqN7Mv4S8dITGsWl7s+1CJXByJdFvasi9mItqVJiq6QyUHsNqGIqxLPtSXRwjb9rUmpaXt6VEG3HCqe6vFj8AE9eXop8ZdEslSYzhBcKFfaxWaicPW0Jq1Vl1SoERgSqbtYroVbkI6ByzR/sRbPbe9k73VLj4rm/Hou9v87F6xz+eqkIi0dtbF3+XlSMS8XKVnByhUXMVhZbzsaAsh3/holHVHytlJBoKbXV0PKoZKB2AKiHd3XKz8XP7hxG8/s78atLsezsG+RUYQH6eo0DytS0BnXseXEmyb3XtAYVHgj7Ok/SogZlcpRhAEryAgdUfaky7RjUsQdA1Za4yP0DVKWz7Q2TvXizHgBVW+Ii9xBQ1TxJHoyDAlCaFzygmCepZAQZaq8BxTxJJSPIUHsPqN48SdAA5B+g+vMkQQNQDaBHOg9QoKvdPEnQAKQGlM1BM62/cpgszJMESVTfxNuYKAmAQhLVA2q1Bm30bCZoAKoD9HjVxsEgalBIovoa1P6DGyAol8Ywk+VH3/BWvr6J3x+AhhdqRWpA2ekcNzWozq+6zqgNDS/Uimpq0OnIyoCkoInXONXpOqM2NLxQK/LwTFIqjVOdrjNqQ8MLtSJvAd1FDco0vFAr8g/QrJOkcWThOqM2NLxQK/IPUH25zqgNDS/Uivy7q1NfrjNqQ8MLtSIPAVXd8lGSyWw9u/D2t/v7Ty4w3dh/8bPkbarnP7rw1qP9bN3zD79VfQ1ZxkNNAy0Hler5Tx7li2T9yy/iVJiTuJB/ED49wu0tH7on/w0ma//ZO/krVjI39p/wFS9+fnf/yWLdk49M7oYFQJO4KkElRkJsuuDrHwJQvRmSUhlM1gJQVnQvfvGI1yf7SZ0Zr+Dr2NKgjIeaBloJKtbDN/+NvUgXfD0AjVgN6hWgrOJIii8GNVFW2eTrjBaa5Rq0FGihiefrASiT9t1IBpOVA5oUV9zK7+fllh2n5evMtvHGQ80CrQTFVACUrwegTH50kviRGOszlCuWH9/df/bWo3xdLwCtBpWsQw2aq3JfvOZWBpOVA/qQ4Vc6Bs1qk3xdLwCtBsVUABTHoIXXXnWSXv6aVScvv/ho0YvPKpt8XS+OQatBJesWgPL1ADTyrJOUtXfZmGdaYs8uXHjzbj5k2I9efDmoNNClcVA/AdXnhaDyMajuXXoGk1UYBy3ojwIW+zEOWpEoUCYfAZ3an47bhyvqnxVOHXG9/M3y5/pyJqkkUaBstY9nko7/7h9s16DaMpgsbzS8UCuqAfT0y/+03sRry3VGbWh4oVZUA+j0qt1j0GQWLx+aeF80vFArUgN6/P4r+50kbbnOqA0NL9SK1ICmUxqYn5Ab03FLjSBD7fL5oHW9ePs1aNrMa5yQd5RhAErywgd0dyWann/MHwl1tj3+dCd/OD2eUd/5bnmTBjEatYBaUeVUJ7tmmV/T9HTCpu/KJuk0PFenWQ+Aqi0xGl4CyqY6zgBlMyNF+QRJmCep+93yJg1iNPwD9HTz6tG5LdbQM83u/Jk18dkUc5irc3DyD1B2PehK/tyG2a0JozObpBNzdXa/W96kQYyGh3d1llSuOjFXZ/e75U0axAD4Duj8dwmSOAY1tlvepEEMwA9Ls9kz+QMo68XH9WY2SSfm6hR/6mOuTn/bjNc3QOf3xj/dwzio+nOfxAKgBoVTnVJDK1QAaljlq5l0T105yjAAJXkA1HSGPQU0Uae/bcYLG9Ds+im960EdZdgzQFnFCUANq91tx44yDEBJXvCA6stRhgEoyesW0KmdOQnLgE41r5J2lGEASvK6BdTCJF5MJUCn7F8Eu6CpTo4y7BmgnxTV6W+b8ToF9PRLO7O2C45BNZ5x5yjDAJTkdQpocoel9Qc3ANCCURvqoAE9vrxlpRZFEy81akMdNKCJLE8mi05SyagNFYBaB1RXjjIMQElep4CyGV1Pf297mElXjjIMQEletzWou9mONeQowwCU5HXfxFsQAJUataECUAsCoFKjNlQAakHtHgHuKMM+Ayq7JjSENIgL2T9AcTVTyagNte+A+ndX5zS7Jb5WjjIMQEle8IDqP8DWUYZ9BlR2HBpCGsSF/MN1kdBJAqCmPABqOsMeAvpBLABqUEvn4te1D0QHrw8y5YC63qFu5SGgu298lz4itE6OqgDPatAlQDv7bTNe8DVoducxrgdNjdpQPygKgJoRAJUataECUAuqjIN+lz5kuU6OMuwRoGzYE4BaULmTdIQLlheGMlQAerqJy+268gCo2hIXcg2gu+vJRcumBUClhjJUPgY6WEBPfmn+anomQROvccWIowwDUJLXKaDH7/+7/SYed3UWDWWoAHR1nU0oS0BPT7gvXmooQxUCKrqiKYQ0iAu5rgZ9FZ18Zve+eABaMpShDh7Qk3+0D2iKps5ly44yDEBJXue9eKtNPL8YFNeDckMZKgDVmxebLAwzSQ1lqADUkgCo1FCGKgRU1JMPIQ3iQvYQ0ONVNPELQxnqEqCyoaYQ0iAuZP8A1bkSNJWjDHsE6BKcANSMcNux1FCGCkAtCQ9ukBrKUIcAqHe3HesM0adylGEASvKaAvqNSOgkAVBTXvCAnm5qXKucyFGGASjJCx5QdJJKhjJUAGpJ6CRJDWWoANSSysegV9BJWhjKUKWAVk93hpAGcSH7B+jSw8POtidRNL83XjvMF6kcZRiAkrzgAV3SwXiSQHpwjS8yOcowACV5vQN09qvfTqL5g71odnsvW2SOowwDUJLXKaDJlFoW5kJUNPFnf/pLXG3O7hxG8/s72SJefSmW8d3yXlJA+/MQsfoa1M1tx/l1/AcbrF1/vZaQmS2yzziqAkKoQas9+RDSIEajFlAbd3yImvjs30VcZ56JalAmRxkGoCSva0Cnuhe/USQCNG3iD8ZMGzgGFX4OgNqpQEWA7uZHFqwGPdveSHvxG+jFFwRArRyBCjtJi+dFYBwUgMoB3dW9coMk3JMkNZShAtDTL2208AAUgLYE1M4hKO6LB6Cte/FWtFyD7mo8wdZRhn0HlEPawS4D0ExVQE9u6jxTz1GGASjJ6wOgRyOtsQNHGQ4F0OL5+BDSIC5kHwHdHemdHHCUYc8AvRgLgBpW+Yp63atTHGUYgJK8poD6dtvx8ar208ocZdhDQJcgrfbkQ0iDuJB/+F+R3AE61WzemRxlGICSvLABxTho1VCGCkAtCWeSpIYyVABqSQBUaihDBaCWBEClhjLUIqBLlALQ7gRApYYyVABqSQBUaihDBaCWBEClhjLUi1UNDtDjVczy0ZUHQNWWuJDVgLLLQaeY7bgbD4CqLXEhqwFNpkK0MOMxAJUaylAHDyhq0A49AKq2xIVccwx6clPv0kyiAKjUUIY6eECPL2/pz2lAEACVGtJQGX+DB5TdFW99tmNIS1qAut5JulCDWvNc1aAJqO122fsaNDoqPuLDnBwDWr3FrIvv7GgzeahagLKr6nsNqCUBUKkhDbUWUCYA2o0AqNSQhgpALQqASg1pqFqA8utCAShNAFRqSEMFoBYFQKWGNNShAOrbbccN1FkWgwSU8TcAQP2QY0BZUbbZrpkHQNVWdzh1L3eAJsUHQC16ALRRFnsGqAxSAEoTAJUa0lABqEUBUKkhDRWAWpQ7QPNiZCsKz4MDoKY8ANooiwMBtDq5LHm/2nsAtFEWS4AWxkMBqCkPgDbKIgAFoBpyAyjvHwHQbvdZ7QFQ7SyWAOVD2sTvBKB1HgDVzuJSMfYXUMHVBrT9au8BUO0sAtD2+9XeA6DaWQSg7fervQdAtbMIQNvvV3sPgGpnEYC236/2HgDVzuJAAOXRdbpf7b2+ATq7NR5Pomh+b7x2mC9SUbMYNqBCOGWgAlCa5IDO7+9Es893zrYn0cG1KFtkomYRgLbfr/ZezwB9zXB8Opk/2Itmt/eyReZRswhA2+9Xe69ngDLFtejszmFhEa+7FIv6q0JAqV9qTYzBd2NpA+p6h0OWEtCz7Y3o9VpCZrbIDOo/c1VXIowaVAloEVLUoDSpAJ3f24i7StUalImaRSGg2VlrAGrK6xugs1txHz7q9BiUlxYAbb9f7b2eAZrymTTzSS9+o4NePACl71d7r2eAHoyZJp2Og/IS6wegWh0lAEqT3TNJS2AWizErSgBqygOgtenoH6BSSAFoNwKgUkMaKgC1KHuASuGsFGUPAf1Yct8HAK2XXUCLJQdAAaiGPARUcZsZAKV4AFSZDm1AFUdtfgIqpBSAdiN7gFZL7mKVVgBq2AOgynQUS26pGAGoBQ+AKtOhPFLrN6CfSEICoPXyDFA+/VXz7FsClO0cALUox4CKGkMAasgDoMp0ANCuwgGgtWqTqVpAi8XZPPsAtNYDoMp09AfQJTgBqDkBUKkhDJXtZCNA86i6CweA1qpppkpjnwCUGA4ArVXTTA0Q0KVmvrtwAGitmmYKgALQlgKgUkMYqhLQKqgAlC5PAZWcvQagFA+AStMhKj0ACkA1BEClhjBUKaCiY1EASlc7QJuqEaB5kVrZtYbikTQH1PWeByoPa1BFneO+Bm0PaFf71d4bUA3aJFO8tLQAXSrSclMPQCkeABWmowioEFIpoPxg1FzJqDxxqADUsjwAVATpJ0WZKxmVJw61FtBiiACULgAqNYShAlDLsgOorA0cEqCCgTMAWi+jgOb81QJahdR7QN+LBUAtCIBKDWGoANSyPAW0RKm5klF54lDZjr6XqRZQHhUAbS/zgKpKbyCA5tF0sV/tPQBaTYdWCcoBLRZrWv/4BagUUgDanTwCVFqLsm/zBVC29wDUokIA9ONMPgIqhBSAdic3gEohlQKaFi8ApXgAtJoOAApAqfIdUF60AJTuAdCilHAqKQ0OUCGpQkArY6EAtF72ANXq8wJQgx4ALQqAAtAuZBRQZQlKIZUCqpj+o2XJaJRa5XMA1LKMAMoKxgCggm4GsWQ0Sq3yObaz12O1A7QSAQCtlxFApdWMFqDK3ry8FrUDKIvieiZliEvRANBWMgKoVhsIQAGohjwBVFikVVKLx6LLlALQOq/fgM7vjdcO+RtFyMXCkhajVi26VJUWj0WXD0btAyqMrvY4lLpf7b1eA3q2PYkOrvF3ipCvi6QFaRCA1kYGQLuVLqDzB3vR7PZe9k4R8jextAAVUqqE1DWg7GdZNLUhKgEtHJ8A0HrpAjq7cxjN7+/Ery7FMrlHEFSQLqCv1zigTAb/mVutOlRemKGiBk3kKMMAlOT1GlDtY1CTGQagJK/XgJ5tb+j14k1mGICSvF4Dqj0OajLDAJTk9RvQkhxlGICSPABqOsMAlOQBUNMZBqAkb0CAcrUdsbe8XRcnFgIJtZNYfRIANfwdoWznqwCo4e8IZTtfBUANf0co2/kqOxN5QVBLAVDIawFQyGsBUMhrAVDIaxEALV0+oq/kor3G285ujceT5tu9Ho9/2ubnKgoh1K5i9UztAS3fRqet1yyLjbdl10rPPt9puh0jJP58y13NFUKoXcXqm9oDWr6EWVdPP/2veJvG275mKX86afOb8efb7epCoYTaRay+qT2g5ZtAGmwXZ6/VtvEGbbaLq5O2u8oVSqhdxOqb2gNavo1OX6zU2mzLrulvvt3s1qc7rXeVK4xQu4nVNwVTg87vbbT7zba1UUGhhNpFrL7J9jFoWmrNt53dmrT9zZbHcwUFE2oHsfomSi9+o1V3kWWv8bZpoTXeLmvv2u4qVwihdhWrbwpkHPRgzDRps118XBbUOGjbULuK1TPhTBLktQAo5LUAKOS1ACjktQAo5LUAKOS1BgPo6eb5x/HieHVFf5vp6NwW2+byVvwff8fFVlX1t79SdxOqaDCAxmhejf/uvvFKe4uTm+vplgmK/F3+fcuAipiFaBoOoNE0rkKPV9frP8jFeUuXVfoAqBUNCNCTmyvRLmvgTzdHI9beH6+ORqOr0fGVP8RvkzcZvewDK4mdHA8kTfzXyTu+abo2+2D2Tevs71VHwfVWAwI0Ojr3NaviTjdjpqZvvEra7ClDcyWr/LL6lX2A/V+oQbPDUL5ptrb0wXhj1KDda0iAxvUdq+COWBUY0/l/jDNGHsPy+Mrj/HPJB+I/y4DyTbO1+QevLCpVqFsNCdCUr7g3nihm9ShenNtKsdrN2nP2MVZFZkgyLQBdbJoCmn2QbwxAu9cQAc068ic3z20VOTy5mR1eKgAtjAEUAc02BqDda4CAHmXDmQleR+e2FlhljXfyAXETXxgJZYBmH+QbA9DuNUBATzdjMmO2GF7HqxmgiZUBpuokpZtma/kH+cbVoVKIrgECmgwOMcjiI8dz/8HrvfR4NP1cNnq0DGi+aVQeZuIb744anKeCdDQoQKHwBEAhrwVAIa8FQCGvBUAhrwVAIa8FQCGvBUAhrwVAIa8FQCGv9f/1ZwSwRxNzPAAAAABJRU5ErkJggg==" /><!-- --></p>
<h2 id="crude-approach-to-obtain-95-credible-interval">Crude approach to obtain 95% credible interval</h2>
<p>The following approach uses empirical bootstrapping to calculate an uncertainty interval around the mean YLL. This</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">map_dbl</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>, <span class="sc">~</span>  <span class="fu">mean</span>(<span class="fu">sample</span>(yll, <span class="dv">404</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(res, <span class="at">xlab =</span> <span class="st">&quot;Mean Years of Life Lost&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>est <span class="ot">&lt;-</span> <span class="fu">mean</span>(res, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">1</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>lci_uci <span class="ot">&lt;-</span> <span class="fu">quantile</span>(res, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>est</span></code></pre></div>
<pre><code>## [1] 9.6</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>lci_uci</span></code></pre></div>
<pre><code>## [1] &quot;9.1-10.2&quot;</code></pre>
<p>The mean and (95% credible interval) for the years of life lost using this approach was 9.6 (95% CI 9.1-10.2).</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>mylist <span class="ot">&lt;-</span> <span class="fu">list</span>(est, lci_uci, mean_age_restricted, mean_age_whole,</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>               plot_ages1, plot_ages2, plot_ages3, plot_surv, plot1_yll, plot2_yll,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>               who, yll_df, yll_mean_who_restricted, yll_mean_who_whole, yll_smry)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(mylist, <span class="fu">paste0</span>(<span class="st">&quot;Output_rmd/&quot;</span>, </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>                       params<span class="sc">$</span>sex, <span class="st">&quot;_&quot;</span>, </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>                       params<span class="sc">$</span>correlation, <span class="st">&quot;_&quot;</span>, </span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>                       params<span class="sc">$</span>correlation_como, <span class="st">&quot;_&quot;</span>, </span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>                       params<span class="sc">$</span>sd_como_age,</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;.Rds&quot;</span>))</span></code></pre></div>

</body>
</html>
